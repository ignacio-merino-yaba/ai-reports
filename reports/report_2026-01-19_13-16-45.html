<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Market Intelligence Report - NaturaleBio</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Prop-Types (Required for Recharts UMD) -->
    <script src="https://unpkg.com/prop-types/prop-types.min.js"></script>
    
    <!-- Recharts -->
    <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f5f5f7; color: #1d1d1f; }
        .glass-panel { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 4px 24px rgba(0,0,0,0.05); }
        .chart-container { width: 100%; height: 300px; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;
        const { 
            LineChart, Line, AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, 
            BarChart, Bar, Legend, ScatterChart, Scatter, ZAxis, ReferenceLine 
        } = Recharts;

        // --- DATA INJECTION ---
        const marketData = {"meta": {"our_brand": "NaturaleBio", "top_competitors": ["NORITUAL LAB", "Ceremonial", "Matcha"], "weeks": ["2025-51", "2025-52", "2026-01"]}, "global_trend": [{"week": "2025-51", "us_clicks": 13185.822275999999, "competitor_clicks": 29992.117211999997, "us_share": 21.67, "competitor_share": 49.29}, {"week": "2025-52", "us_clicks": 10420.943440000001, "competitor_clicks": 25276.6356, "us_share": 21.83, "competitor_share": 52.949999999999996}, {"week": "2026-01", "us_clicks": 6086.78514, "competitor_clicks": 13364.5216, "us_share": 22.59, "competitor_share": 49.6}], "brand_trend": [{"week": "2025-51", "Us": 21.67, "NORITUAL LAB": 25.509999999999998, "Ceremonial": 11.41, "Matcha": 3.48, "Rest of Market": 8.89}, {"week": "2025-52", "Us": 21.83, "NORITUAL LAB": 27.189999999999998, "Ceremonial": 8.42, "Matcha": 3.4, "Rest of Market": 13.94}, {"week": "2026-01", "Us": 22.590000000000003, "NORITUAL LAB": 26.72, "Ceremonial": 7.38, "Matcha": 3.0, "Rest of Market": 12.5}], "levers": {"price_correlation": {"us": -0.42447041841676547, "market": 0.28140059695977276}, "deals": {"us": [2.9400000000000004, 6.392222222222221], "competitors": [2.9275000000000007, 6.369545454545453]}, "coupons": {"us": [0, 5.764545454545455], "competitors": [3.2933333333333334, 6.604000000000001]}, "choice": {"us": [0, 5.764545454545455], "competitors": [18.256666666666664, 4.220434782608696]}}, "efficiency": [{"asin": "B08XVX8V1T", "brand": "Bio", "is_us": false, "rank": 10.0, "share": 2.39, "price": 11.9975, "title": "Bio Matcha Pulver 100 g \u2013 Japa..."}, {"asin": "B08XVX8V1T", "brand": "bioKontor", "is_us": false, "rank": 10.0, "share": 2.39, "price": 11.9975, "title": "Bio Matcha Pulver 100 g \u2013 Japa..."}, {"asin": "B0CNRX8G5S", "brand": "NORITUAL LAB", "is_us": false, "rank": 2.0, "share": 19.34, "price": 23.91, "title": "Ceremonial Matcha - Reines Mat..."}, {"asin": "B0FSL3C3Z8", "brand": "Ceremonial", "is_us": false, "rank": 6.0, "share": 7.38, "price": 15.5575, "title": "Ceremonial Matcha Ryoku - Rein..."}, {"asin": "B0FSL3C3Z8", "brand": "NORITUAL LAB", "is_us": false, "rank": 6.0, "share": 7.38, "price": 15.5575, "title": "Ceremonial Matcha Ryoku - Rein..."}, {"asin": "B0DRP6Y6XC", "brand": "Special Leaves", "is_us": false, "rank": 16.0, "share": 3.0, "price": 10.39, "title": "Matcha Pulver - 90g - 100% Nat..."}, {"asin": "B0DRP6Y6XC", "brand": "Matcha", "is_us": false, "rank": 16.0, "share": 3.0, "price": 10.39, "title": "Matcha Pulver - 90g - 100% Nat..."}, {"asin": "B07SZFD3P9", "brand": "NaturaleBio", "is_us": true, "rank": 0, "share": 2.68, "price": 30.27, "title": "NaturaleBio Matcha Ceremonial ..."}, {"asin": "B06XQ69YCQ", "brand": "NaturaleBio", "is_us": true, "rank": 5.0, "share": 3.35, "price": 10.2225, "title": "NaturaleBio Matcha Tee Pulver ..."}, {"asin": "B079VQ52MK", "brand": "NaturaleBio", "is_us": true, "rank": 5.0, "share": 3.66, "price": 24.5275, "title": "NaturaleBio Matcha Tee Pulver ..."}, {"asin": "B06XQ5DCYJ", "brand": "NaturaleBio", "is_us": true, "rank": 2.0, "share": 12.9, "price": 14.6075, "title": "NaturaleBio Matcha Tee Pulver ..."}, {"asin": "B0F9B1LWQQ", "brand": "UNREAL\u00ae", "is_us": false, "rank": 19.0, "share": 1.57, "price": 31.2725, "title": "UNREAL\u00ae 100g Ceremonial Bio Ma..."}, {"asin": "B07MD4LB49", "brand": "VAHDAM", "is_us": false, "rank": 9.0, "share": 3.15, "price": 10.43, "title": "VAHDAM, Matcha Gr\u00fcntee Pulver ..."}], "comparator": [{"week": "2026-01", "brand": "Bio", "asin": "B08XVX8V1T", "title": "Bio Matcha Pulver 100 g \u2013 Japan Matcha Tee, 100% n...", "price": 11.9975, "click_share": 2.39, "rank": 10.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2026-01", "brand": "bioKontor", "asin": "B08XVX8V1T", "title": "Bio Matcha Pulver 100 g \u2013 Japan Matcha Tee, 100% n...", "price": 11.9975, "click_share": 2.39, "rank": 10.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-52", "brand": "Bio", "asin": "B08XVX8V1T", "title": "Bio Matcha Pulver 100 g \u2013 Japan Matcha Tee, 100% n...", "price": 12.367142857, "click_share": 2.44, "rank": 10.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-52", "brand": "bioKontor", "asin": "B08XVX8V1T", "title": "Bio Matcha Pulver 100 g \u2013 Japan Matcha Tee, 100% n...", "price": 12.367142857, "click_share": 2.44, "rank": 10.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-51", "brand": "NORITUAL LAB", "asin": "B0CNRX8G5S", "title": "Ceremonial Matcha - Reines Matcha Pulver aus Japan...", "price": 24.03, "click_share": 16.66, "rank": 2.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-52", "brand": "NORITUAL LAB", "asin": "B0CNRX8G5S", "title": "Ceremonial Matcha - Reines Matcha Pulver aus Japan...", "price": 24.648571429, "click_share": 18.77, "rank": 2.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2026-01", "brand": "NORITUAL LAB", "asin": "B0CNRX8G5S", "title": "Ceremonial Matcha - Reines Matcha Pulver aus Japan...", "price": 23.91, "click_share": 19.34, "rank": 2.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-51", "brand": "Ceremonial", "asin": "B0G1T7N675", "title": "Ceremonial Matcha Pulver BIO-Qualit\u00e4t 50g ideal zu...", "price": 8.898571429, "click_share": 2.56, "rank": 12.0, "is_us": false, "has_deal": true, "has_coupon": false}, {"week": "2026-01", "brand": "Ceremonial", "asin": "B0FSL3C3Z8", "title": "Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...", "price": 15.5575, "click_share": 7.38, "rank": 6.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2026-01", "brand": "NORITUAL LAB", "asin": "B0FSL3C3Z8", "title": "Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...", "price": 15.5575, "click_share": 7.38, "rank": 6.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-52", "brand": "NORITUAL LAB", "asin": "B0FSL3C3Z8", "title": "Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...", "price": 16.037142857, "click_share": 8.42, "rank": 6.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-52", "brand": "Ceremonial", "asin": "B0FSL3C3Z8", "title": "Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...", "price": 16.037142857, "click_share": 8.42, "rank": 6.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-51", "brand": "Ceremonial", "asin": "B0FSL3C3Z8", "title": "Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...", "price": 15.635714286, "click_share": 8.85, "rank": 5.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-51", "brand": "NORITUAL LAB", "asin": "B0FSL3C3Z8", "title": "Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...", "price": 15.635714286, "click_share": 8.85, "rank": 5.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-51", "brand": "Jean", "asin": "B0F5BVFRC1", "title": "Jean & Len Handcreme I Love You So Matcha, f\u00fcr nor...", "price": 3.095714286, "click_share": 1.92, "rank": 12.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2026-01", "brand": "Special Leaves", "asin": "B0DRP6Y6XC", "title": "Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...", "price": 10.39, "click_share": 3.0, "rank": 16.0, "is_us": false, "has_deal": false, "has_coupon": true}, {"week": "2026-01", "brand": "Matcha", "asin": "B0DRP6Y6XC", "title": "Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...", "price": 10.39, "click_share": 3.0, "rank": 16.0, "is_us": false, "has_deal": false, "has_coupon": true}, {"week": "2025-52", "brand": "Special Leaves", "asin": "B0DRP6Y6XC", "title": "Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...", "price": 10.71, "click_share": 3.4, "rank": 13.0, "is_us": false, "has_deal": false, "has_coupon": true}, {"week": "2025-52", "brand": "Matcha", "asin": "B0DRP6Y6XC", "title": "Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...", "price": 10.71, "click_share": 3.4, "rank": 13.0, "is_us": false, "has_deal": false, "has_coupon": true}, {"week": "2025-51", "brand": "Matcha", "asin": "B0DRP6Y6XC", "title": "Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...", "price": 10.44, "click_share": 3.48, "rank": 14.0, "is_us": false, "has_deal": false, "has_coupon": true}, {"week": "2025-51", "brand": "Special Leaves", "asin": "B0DRP6Y6XC", "title": "Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...", "price": 10.44, "click_share": 3.48, "rank": 14.0, "is_us": false, "has_deal": false, "has_coupon": true}, {"week": "2026-01", "brand": "NaturaleBio", "asin": "B07SZFD3P9", "title": "NaturaleBio Matcha Ceremonial Grade 100g. Original...", "price": 30.27, "click_share": 2.68, "rank": 0, "is_us": true, "has_deal": false, "has_coupon": false}, {"week": "2025-52", "brand": "NaturaleBio", "asin": "B07SZFD3P9", "title": "NaturaleBio Matcha Ceremonial Grade 100g. Original...", "price": 30.704285714, "click_share": 2.93, "rank": 23.0, "is_us": true, "has_deal": true, "has_coupon": false}, {"week": "2025-51", "brand": "NaturaleBio", "asin": "B07SZFD3P9", "title": "NaturaleBio Matcha Ceremonial Grade 100g. Original...", "price": 26.748571429, "click_share": 2.95, "rank": 22.0, "is_us": true, "has_deal": true, "has_coupon": false}, {"week": "2026-01", "brand": "NaturaleBio", "asin": "B06XQ69YCQ", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 10.2225, "click_share": 3.35, "rank": 5.0, "is_us": true, "has_deal": false, "has_coupon": false}, {"week": "2025-52", "brand": "NaturaleBio", "asin": "B079VQ52MK", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 24.855714286, "click_share": 3.49, "rank": 5.0, "is_us": true, "has_deal": false, "has_coupon": false}, {"week": "2026-01", "brand": "NaturaleBio", "asin": "B079VQ52MK", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 24.5275, "click_share": 3.66, "rank": 5.0, "is_us": true, "has_deal": false, "has_coupon": false}, {"week": "2025-51", "brand": "NaturaleBio", "asin": "B079VQ52MK", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 23.075714286, "click_share": 3.69, "rank": 5.0, "is_us": true, "has_deal": false, "has_coupon": false}, {"week": "2025-52", "brand": "NaturaleBio", "asin": "B06XQ69YCQ", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 10.538571429, "click_share": 3.75, "rank": 4.0, "is_us": true, "has_deal": false, "has_coupon": false}, {"week": "2025-51", "brand": "NaturaleBio", "asin": "B06XQ69YCQ", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 9.2, "click_share": 3.85, "rank": 5.0, "is_us": true, "has_deal": false, "has_coupon": false}, {"week": "2025-51", "brand": "NaturaleBio", "asin": "B06XQ5DCYJ", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 14.084285714, "click_share": 11.18, "rank": 2.0, "is_us": true, "has_deal": false, "has_coupon": false}, {"week": "2025-52", "brand": "NaturaleBio", "asin": "B06XQ5DCYJ", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 15.058571429, "click_share": 11.66, "rank": 2.0, "is_us": true, "has_deal": false, "has_coupon": false}, {"week": "2026-01", "brand": "NaturaleBio", "asin": "B06XQ5DCYJ", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 14.6075, "click_share": 12.9, "rank": 2.0, "is_us": true, "has_deal": false, "has_coupon": false}, {"week": "2026-01", "brand": "UNREAL\u00ae", "asin": "B0F9B1LWQQ", "title": "UNREAL\u00ae 100g Ceremonial Bio Matcha \u2013 100% Japanisc...", "price": 31.2725, "click_share": 1.57, "rank": 19.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2026-01", "brand": "VAHDAM", "asin": "B07MD4LB49", "title": "VAHDAM, Matcha Gr\u00fcntee Pulver (100g, 50+ Tassen) A...", "price": 10.43, "click_share": 3.15, "rank": 9.0, "is_us": false, "has_deal": false, "has_coupon": false}, {"week": "2025-51", "brand": "VAHDAM", "asin": "B07MD4LB49", "title": "VAHDAM, Matcha Gr\u00fcntee Pulver (100g, 50+ Tassen) A...", "price": 9.005714286, "click_share": 3.49, "rank": 8.0, "is_us": false, "has_deal": true, "has_coupon": false}, {"week": "2025-52", "brand": "VAHDAM", "asin": "B07MD4LB49", "title": "VAHDAM, Matcha Gr\u00fcntee Pulver (100g, 50+ Tassen) A...", "price": 9.895714286, "click_share": 4.19, "rank": 7.0, "is_us": false, "has_deal": true, "has_coupon": false}, {"week": "2025-52", "brand": "VAHDAM", "asin": "B07K1WBH4K", "title": "VAHDAM, Vanille Matcha Gr\u00fcner Tee Pulver (100g, 50...", "price": 9.895714286, "click_share": 1.47, "rank": 20.0, "is_us": false, "has_deal": true, "has_coupon": false}], "auto_insights": {"share_trend": "grew", "share_delta": 0.76, "dominant_competitor": "NORITUAL LAB", "price_dynamic": "No clear correlation", "deal_effectiveness": "highly effective"}};

        // --- ICONS ---
        const { TrendingUp, TrendingDown, Target, Zap, Search, AlertCircle, Award, BarChart2 } = lucide;

        // --- COMPONENTS ---

        const KpiCard = ({ title, value, subtext, trend, icon: Icon, color = "blue" }) => (
            <div className="glass-panel rounded-2xl p-6 flex items-start justify-between">
                <div>
                    <p className="text-sm font-medium text-gray-500 mb-1">{title}</p>
                    <h3 className="text-3xl font-bold text-gray-800">{value}</h3>
                    {subtext && <p className={`text-xs mt-2 font-medium ${trend === 'up' ? 'text-green-600' : trend === 'down' ? 'text-red-600' : 'text-gray-400'}`}>
                        {subtext}
                    </p>}
                </div>
                <div className={`p-3 rounded-xl bg-${color}-100 text-${color}-600`}>
                    <Icon size={24} />
                </div>
            </div>
        );

        const SectionHeader = ({ title, subtitle }) => (
            <div className="mb-6 mt-10">
                <h2 className="text-xl font-bold text-gray-900">{title}</h2>
                <p className="text-sm text-gray-500">{subtitle}</p>
            </div>
        );

        const InsightBadge = ({ type, text }) => {
            const colors = {
                risk: "bg-red-100 text-red-700 border-red-200",
                opportunity: "bg-green-100 text-green-700 border-green-200",
                info: "bg-blue-100 text-blue-700 border-blue-200"
            };
            return (
                <div className={`flex items-start p-4 rounded-xl border ${colors[type]} mb-3`}>
                    <AlertCircle className="w-5 h-5 mr-3 mt-0.5 flex-shrink-0" />
                    <p className="text-sm font-medium">{text}</p>
                </div>
            );
        };

        const Dashboard = () => {
            const [activeTab, setActiveTab] = useState('report');
            const [selectedWeek, setSelectedWeek] = useState(marketData.meta.weeks[marketData.meta.weeks.length - 1]);
            const [selectedCompetitor, setSelectedCompetitor] = useState(marketData.meta.top_competitors[0]);

            // Filtered Data for Comparator
            const comparatorUs = marketData.comparator.find(c => c.week === selectedWeek && c.is_us && c.asin.includes("B06XQ5DCYJ")) || marketData.comparator.find(c => c.week === selectedWeek && c.is_us); // Prefer top ASIN
            const comparatorThem = marketData.comparator.find(c => c.week === selectedWeek && c.brand === selectedCompetitor);

            // Lever Data formatting
            const dealData = [
                { name: 'With Deal', Us: marketData.levers.deals.us[1], Competitors: marketData.levers.deals.competitors[1] },
                { name: 'No Deal', Us: marketData.levers.deals.us[0], Competitors: marketData.levers.deals.competitors[0] }
            ];

            return (
                <div className="max-w-7xl mx-auto px-4 py-8">
                    {/* Header */}
                    <div className="flex justify-between items-center mb-8">
                        <div>
                            <h1 className="text-3xl font-bold text-gray-900">Market Intelligence: {marketData.meta.our_brand}</h1>
                            <p className="text-gray-500 mt-1">Single Parent ASIN Analysis &bull; {marketData.meta.weeks[0]} to {marketData.meta.weeks[marketData.meta.weeks.length - 1]}</p>
                        </div>
                        <div className="bg-white p-1 rounded-xl border border-gray-200 flex">
                            <button 
                                onClick={() => setActiveTab('report')}
                                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${activeTab === 'report' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-500 hover:bg-gray-50'}`}
                            >
                                Reporte Estrat√©gico
                            </button>
                            <button 
                                onClick={() => setActiveTab('comparator')}
                                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${activeTab === 'comparator' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-500 hover:bg-gray-50'}`}
                            >
                                Comparador Interactivo
                            </button>
                        </div>
                    </div>

                    {activeTab === 'report' ? (
                        <div className="animate-fade-in space-y-8">
                            
                            {/* 1. TOP KPI ROW */}
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                                <KpiCard 
                                    title="Avg Click Share (Us)" 
                                    value={`${marketData.brand_trend[marketData.brand_trend.length-1].Us.toFixed(1)}%`}
                                    subtext={`${marketData.auto_insights.share_delta > 0 ? '+' : ''}${marketData.auto_insights.share_delta}% vs prev week`}
                                    trend={marketData.auto_insights.share_delta > 0 ? 'up' : 'down'}
                                    icon={Target}
                                    color="blue"
                                />
                                <KpiCard 
                                    title="Dominant Competitor" 
                                    value={marketData.auto_insights.dominant_competitor}
                                    subtext="Maintaining strong rank leadership"
                                    trend="neutral"
                                    icon={Award}
                                    color="orange"
                                />
                                <KpiCard 
                                    title="Price Correlation" 
                                    value={marketData.levers.price_correlation.us.toFixed(2)}
                                    subtext="Negative = Lower Price wins Share"
                                    trend="neutral"
                                    icon={TrendingUp}
                                    color="green"
                                />
                                <KpiCard 
                                    title="Deal Effectiveness" 
                                    value={marketData.auto_insights.deal_effectiveness === 'highly effective' ? 'High' : 'Low'}
                                    subtext="Impact on Click Share"
                                    trend="up"
                                    icon={Zap}
                                    color="purple"
                                />
                            </div>

                            {/* 2. GLOBAL TREND */}
                            <div className="glass-panel rounded-2xl p-6">
                                <SectionHeader title="1. Tendencia Global del Parent" subtitle="Clicks & Market Share: Nosotros vs Competencia" />
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <div className="h-[300px]">
                                        <h4 className="text-sm font-semibold text-gray-600 mb-4 text-center">Estimated Clicks Volume</h4>
                                        <ResponsiveContainer width="100%" height="100%">
                                            <AreaChart data={marketData.global_trend}>
                                                <defs>
                                                    <linearGradient id="colorUs" x1="0" y1="0" x2="0" y2="1">
                                                        <stop offset="5%" stopColor="#2563eb" stopOpacity={0.1}/>
                                                        <stop offset="95%" stopColor="#2563eb" stopOpacity={0}/>
                                                    </linearGradient>
                                                </defs>
                                                <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#e5e7eb" />
                                                <XAxis dataKey="week" axisLine={false} tickLine={false} tick={{fontSize: 12}} />
                                                <YAxis axisLine={false} tickLine={false} tick={{fontSize: 12}} />
                                                <Tooltip contentStyle={{borderRadius: '12px', border: 'none', boxShadow: '0 4px 12px rgba(0,0,0,0.1)'}} />
                                                <Area type="monotone" dataKey="us_clicks" stroke="#2563eb" fillOpacity={1} fill="url(#colorUs)" name="Our Clicks" strokeWidth={3} />
                                                <Area type="monotone" dataKey="competitor_clicks" stroke="#9ca3af" fillOpacity={0.1} fill="#9ca3af" name="Competitor Clicks" strokeWidth={2} strokeDasharray="5 5" />
                                                <Legend />
                                            </AreaChart>
                                        </ResponsiveContainer>
                                    </div>
                                    <div className="h-[300px]">
                                        <h4 className="text-sm font-semibold text-gray-600 mb-4 text-center">Market Click Share %</h4>
                                        <ResponsiveContainer width="100%" height="100%">
                                            <LineChart data={marketData.global_trend}>
                                                <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#e5e7eb" />
                                                <XAxis dataKey="week" axisLine={false} tickLine={false} />
                                                <YAxis axisLine={false} tickLine={false} domain={[0, 100]} />
                                                <Tooltip contentStyle={{borderRadius: '12px'}} />
                                                <Line type="monotone" dataKey="us_share" stroke="#2563eb" strokeWidth={3} dot={{r: 4}} name="Our Share %" />
                                                <Line type="monotone" dataKey="competitor_share" stroke="#ef4444" strokeWidth={2} name="Competitor Share %" />
                                            </LineChart>
                                        </ResponsiveContainer>
                                    </div>
                                </div>
                                <div className="mt-4 p-4 bg-gray-50 rounded-xl text-sm text-gray-600">
                                    <strong>An√°lisis de Tendencia:</strong> La marca {marketData.meta.our_brand} ha mostrado una tendencia de {marketData.auto_insights.share_trend} en la √∫ltima semana. 
                                    El volumen total de b√∫squedas parece haber bajado en la √∫ltima semana registrada, pero nuestra cuota se mantuvo s√≥lida, lo que indica una base de clientes leal o una mejor conversi√≥n relativa.
                                </div>
                            </div>

                            {/* 3. COMPETITIVIDAD */}
                            <div className="glass-panel rounded-2xl p-6">
                                <SectionHeader title="2. Competitividad de Marca" subtitle="Cuota de Mercado vs Top 3 Competidores" />
                                <div className="h-[350px]">
                                    <ResponsiveContainer width="100%" height="100%">
                                        <AreaChart data={marketData.brand_trend}>
                                            <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#e5e7eb" />
                                            <XAxis dataKey="week" axisLine={false} tickLine={false} />
                                            <YAxis axisLine={false} tickLine={false} />
                                            <Tooltip />
                                            <Legend verticalAlign="top" height={36}/>
                                            <Area type="monotone" dataKey="Us" stackId="1" stroke="#2563eb" fill="#3b82f6" name={marketData.meta.our_brand} />
                                            {marketData.meta.top_competitors.map((comp, i) => (
                                                <Area key={comp} type="monotone" dataKey={comp} stackId="1" stroke={`#${['64748b', '94a3b8', 'cbd5e1'][i]}`} fill={`#${['64748b', '94a3b8', 'cbd5e1'][i]}`} name={comp} />
                                            ))}
                                            <Area type="monotone" dataKey="Rest of Market" stackId="1" stroke="#e2e8f0" fill="#f1f5f9" name="Rest" />
                                        </AreaChart>
                                    </ResponsiveContainer>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                                    <div className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                                        <p className="text-xs text-gray-400 font-bold uppercase">Dominio</p>
                                        <p className="text-sm mt-1"><strong>{marketData.auto_insights.dominant_competitor}</strong> domina consistentemente con ~25-27% de cuota, super√°ndonos ligeramente.</p>
                                    </div>
                                    <div className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                                        <p className="text-xs text-gray-400 font-bold uppercase">Amenaza</p>
                                        <p className="text-sm mt-1">La marca "Ceremonial" est√° perdiendo fuerza, lo que representa una oportunidad de capturar su tr√°fico perdido.</p>
                                    </div>
                                    <div className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                                        <p className="text-xs text-gray-400 font-bold uppercase">Estabilidad</p>
                                        <p className="text-sm mt-1">Nuestra marca es estable por encima del 20%, lo que sugiere un posicionamiento resiliente.</p>
                                    </div>
                                </div>
                            </div>

                            {/* 4. LEVERS */}
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div className="glass-panel rounded-2xl p-6">
                                    <SectionHeader title="3. Impacto de Promociones (Deals)" subtitle="Click Share Promedio: Con vs Sin Deal" />
                                    <div className="h-[250px]">
                                        <ResponsiveContainer width="100%" height="100%">
                                            <BarChart data={dealData}>
                                                <CartesianGrid strokeDasharray="3 3" vertical={false} />
                                                <XAxis dataKey="name" axisLine={false} tickLine={false} />
                                                <YAxis axisLine={false} tickLine={false} />
                                                <Tooltip cursor={{fill: 'transparent'}} />
                                                <Legend />
                                                <Bar dataKey="Us" fill="#2563eb" radius={[4, 4, 0, 0]} name="Our Share %" />
                                                <Bar dataKey="Competitors" fill="#9ca3af" radius={[4, 4, 0, 0]} name="Comp Share %" />
                                            </BarChart>
                                        </ResponsiveContainer>
                                    </div>
                                    <p className="text-xs text-gray-500 mt-2 text-center">Los Deals duplican nuestra cuota de clics ({marketData.levers.deals.us[1].toFixed(1)}% vs {marketData.levers.deals.us[0].toFixed(1)}%). Es una palanca cr√≠tica.</p>
                                </div>
                                
                                <div className="glass-panel rounded-2xl p-6">
                                    <SectionHeader title="4. Eficiencia: Rank vs Share" subtitle="√öltima semana (Bubble size = Price)" />
                                    <div className="h-[250px]">
                                        <ResponsiveContainer width="100%" height="100%">
                                            <ScatterChart>
                                                <CartesianGrid strokeDasharray="3 3" />
                                                <XAxis type="number" dataKey="rank" name="Organic Rank" domain={[0, 25]} reversed={true} label={{ value: 'Rank (Better ->)', position: 'insideBottomRight', offset: -5 }} />
                                                <YAxis type="number" dataKey="share" name="Click Share" unit="%" label={{ value: 'Share %', angle: -90, position: 'insideLeft' }} />
                                                <Tooltip cursor={{ strokeDasharray: '3 3' }} content={({ payload }) => {
                                                    if (payload && payload.length) {
                                                        const data = payload[0].payload;
                                                        return (
                                                            <div className="bg-white p-3 border shadow-lg rounded-lg text-xs">
                                                                <p className="font-bold">{data.brand}</p>
                                                                <p>{data.title.substring(0, 20)}...</p>
                                                                <p>Rank: {data.rank} | Share: {data.share}%</p>
                                                                <p>Price: {data.price}‚Ç¨</p>
                                                            </div>
                                                        );
                                                    }
                                                    return null;
                                                }} />
                                                <Scatter name="Competitors" data={marketData.efficiency.filter(i => !i.is_us)} fill="#9ca3af" fillOpacity={0.6} />
                                                <Scatter name="Us" data={marketData.efficiency.filter(i => i.is_us)} fill="#2563eb" fillOpacity={0.9} shape="star" />
                                            </ScatterChart>
                                        </ResponsiveContainer>
                                    </div>
                                    <p className="text-xs text-gray-500 mt-2 text-center">Nuestro ASIN estrella (estrella azul) tiene un rendimiento excelente (~13% share) en posiciones top, pero NORITUAL logra m√°s share (~19%) con pricing mayor.</p>
                                </div>
                            </div>

                            {/* 5. CONCLUSIONS & RECOMMENDATIONS */}
                            <div className="glass-panel rounded-2xl p-6 border-l-4 border-blue-600">
                                <h2 className="text-2xl font-bold text-gray-900 mb-6">üí° Conclusiones y Plan de Acci√≥n</h2>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div>
                                        <h3 className="font-bold text-gray-800 mb-3">Insights Clave</h3>
                                        <ul className="space-y-3">
                                            <li className="flex items-start text-sm text-gray-600"><span className="text-blue-500 mr-2">‚óè</span> <strong>Deals son el motor principal:</strong> La diferencia de visibilidad con/sin deal es masiva (x2.1).</li>
                                            <li className="flex items-start text-sm text-gray-600"><span className="text-blue-500 mr-2">‚óè</span> <strong>Sensibilidad al Precio:</strong> Tenemos una correlaci√≥n negativa precio-share. Subir precios sin valor a√±adido reducir√° dr√°sticamente la cuota.</li>
                                            <li className="flex items-start text-sm text-gray-600"><span className="text-blue-500 mr-2">‚óè</span> <strong>Competidor Premium:</strong> NORITUAL LAB vende m√°s caro y tiene m√°s cuota. Su branding/listing convence m√°s que el precio bajo.</li>
                                            <li className="flex items-start text-sm text-gray-600"><span className="text-blue-500 mr-2">‚óè</span> <strong>ASIN H√©roe:</strong> El ASIN B06XQ5DCYJ sostiene la marca. Proteger su stock y ranking es prioridad absoluta.</li>
                                            <li className="flex items-start text-sm text-gray-600"><span className="text-blue-500 mr-2">‚óè</span> <strong>Oportunidad en "Ceremonial":</strong> Este competidor cae en cuota. Pujar en sus keywords de marca podr√≠a capturar tr√°fico f√°cil.</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-gray-800 mb-3">Recomendaciones Accionables</h3>
                                        <InsightBadge type="opportunity" text="Activar Cup√≥n de 5-10%: Los competidores usan cupones agresivamente (Share 6.6%). Nosotros no los estamos usando y es una brecha competitiva." />
                                        <InsightBadge type="risk" text="Defensa de Precio: No subir precio en el ASIN B06XQ5DCYJ. La elasticidad es alta. Mantener ~14‚Ç¨." />
                                        <InsightBadge type="info" text="Optimizaci√≥n de Listing: Analizar las im√°genes de NORITUAL LAB. ¬øPor qu√© convierten mejor a precio m√°s alto? Imitar su contenido A+." />
                                    </div>
                                </div>
                            </div>

                        </div>
                    ) : (
                        <div className="animate-fade-in">
                            {/* COMPARATOR UI */}
                            <div className="glass-panel rounded-2xl p-8 max-w-4xl mx-auto">
                                <div className="flex gap-4 mb-8">
                                    <select 
                                        className="p-3 rounded-xl border border-gray-300 bg-white flex-1 font-medium"
                                        value={selectedWeek}
                                        onChange={(e) => setSelectedWeek(e.target.value)}
                                    >
                                        {marketData.meta.weeks.map(w => <option key={w} value={w}>Semana {w}</option>)}
                                    </select>
                                    <select 
                                        className="p-3 rounded-xl border border-gray-300 bg-white flex-1 font-medium"
                                        value={selectedCompetitor}
                                        onChange={(e) => setSelectedCompetitor(e.target.value)}
                                    >
                                        {marketData.meta.top_competitors.map(c => <option key={c} value={c}>{c}</option>)}
                                    </select>
                                </div>

                                {comparatorUs && comparatorThem ? (
                                    <div className="grid grid-cols-3 gap-8 text-center">
                                        
                                        {/* US */}
                                        <div className="p-6 rounded-2xl bg-blue-50 border border-blue-100">
                                            <h3 className="text-blue-800 font-bold mb-1">{marketData.meta.our_brand}</h3>
                                            <p className="text-xs text-blue-600 mb-4 truncate">{comparatorUs.title}</p>
                                            <div className="space-y-4">
                                                <div><p className="text-xs text-gray-500">Price</p><p className="text-xl font-bold">{comparatorUs.price.toFixed(2)}‚Ç¨</p></div>
                                                <div><p className="text-xs text-gray-500">Share</p><p className="text-xl font-bold">{comparatorUs.click_share.toFixed(2)}%</p></div>
                                                <div><p className="text-xs text-gray-500">Rank</p><p className="text-xl font-bold">#{comparatorUs.rank}</p></div>
                                            </div>
                                        </div>

                                        {/* VS */}
                                        <div className="flex flex-col justify-center items-center space-y-6">
                                            <div className="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center font-bold text-gray-500">VS</div>
                                            
                                            <div className="w-full">
                                                <p className="text-xs text-gray-400 mb-1">Price Gap</p>
                                                <div className={`p-2 rounded-lg font-bold ${comparatorUs.price < comparatorThem.price ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                                                    {(comparatorUs.price - comparatorThem.price).toFixed(2)}‚Ç¨
                                                </div>
                                            </div>
                                            <div className="w-full">
                                                <p className="text-xs text-gray-400 mb-1">Share Gap</p>
                                                <div className={`p-2 rounded-lg font-bold ${comparatorUs.click_share > comparatorThem.click_share ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                                                    {(comparatorUs.click_share - comparatorThem.click_share).toFixed(2)}%
                                                </div>
                                            </div>
                                        </div>

                                        {/* THEM */}
                                        <div className="p-6 rounded-2xl bg-gray-50 border border-gray-200">
                                            <h3 className="text-gray-800 font-bold mb-1">{selectedCompetitor}</h3>
                                            <p className="text-xs text-gray-500 mb-4 truncate">{comparatorThem.title}</p>
                                            <div className="space-y-4">
                                                <div><p className="text-xs text-gray-500">Price</p><p className="text-xl font-bold">{comparatorThem.price.toFixed(2)}‚Ç¨</p></div>
                                                <div><p className="text-xs text-gray-500">Share</p><p className="text-xl font-bold">{comparatorThem.click_share.toFixed(2)}%</p></div>
                                                <div><p className="text-xs text-gray-500">Rank</p><p className="text-xl font-bold">#{comparatorThem.rank}</p></div>
                                            </div>
                                        </div>

                                    </div>
                                ) : (
                                    <div className="text-center p-12 text-gray-400 bg-gray-50 rounded-2xl border-dashed border-2 border-gray-200">
                                        No hay datos directos comparables para esta combinaci√≥n de semana y competidor.
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Dashboard />);
    </script>
</body>
</html>