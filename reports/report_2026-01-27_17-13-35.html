<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Inteligencia de Mercado - Parent ASIN</title>
    
    <!-- Google Charts -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <style>
        /* Base Reset & Typography */
        :root {
            --primary: #4285F4;
            --secondary: #34A853;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-main: #202124;
            --text-sub: #5f6368;
            --border: #dadce0;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            line-height: 1.5;
        }

        /* Utilities */
        .container { max-width: 1200px; margin: 0 auto; }
        .card { background: var(--card-bg); border-radius: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); padding: 24px; margin-bottom: 24px; transition: all 0.3s cubic-bezier(.25,.8,.25,1); }
        .card:hover { box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22); }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
        .flex { display: flex; align-items: center; }
        .justify-between { justify-content: space-between; }
        .mb-4 { margin-bottom: 16px; }
        .text-xl { font-size: 1.25rem; font-weight: 600; }
        .text-2xl { font-size: 1.5rem; font-weight: 700; }
        .text-sub { color: var(--text-sub); font-size: 0.9rem; }
        
        /* Header */
        header { margin-bottom: 32px; }
        h1 { margin: 0; font-size: 2rem; color: var(--text-main); }
        .brand-badge { background: #e8f0fe; color: var(--primary); padding: 4px 12px; border-radius: 12px; font-weight: 600; font-size: 0.9rem; display: inline-block; margin-top: 8px; }

        /* Tabs */
        .tabs { display: flex; border-bottom: 1px solid var(--border); margin-bottom: 24px; }
        .tab-btn { padding: 12px 24px; background: none; border: none; cursor: pointer; font-size: 1rem; color: var(--text-sub); border-bottom: 3px solid transparent; transition: all 0.2s; }
        .tab-btn.active { color: var(--primary); border-bottom-color: var(--primary); font-weight: 600; }
        .tab-content { display: none; animation: fadeIn 0.4s; }
        .tab-content.active { display: block; }

        /* Insights Section */
        .insight-item { border-left: 4px solid var(--primary); padding-left: 16px; margin-bottom: 16px; }
        .insight-item h4 { margin: 0 0 4px 0; font-size: 1rem; }
        .insight-item p { margin: 0; color: var(--text-sub); }
        .rec-item { display: flex; gap: 12px; margin-bottom: 12px; align-items: flex-start; }
        .rec-icon { color: var(--secondary); }

        /* Interactive Controls */
        .controls { background: #fff; padding: 16px; border-radius: 12px; border: 1px solid var(--border); display: flex; gap: 16px; margin-bottom: 24px; }
        select { padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); font-size: 0.95rem; min-width: 200px; outline: none; }
        
        /* Comparison Table */
        .comp-table { width: 100%; border-collapse: collapse; margin-top: 16px; }
        .comp-table th { text-align: left; color: var(--text-sub); font-weight: 500; border-bottom: 1px solid var(--border); padding: 12px; }
        .comp-table td { padding: 12px; border-bottom: 1px solid #f1f3f4; }
        .comp-table tr:hover { background-color: #f8f9fa; }
        .badge-deal { background: #fce8e6; color: #c5221f; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; }
        .badge-choice { background: #202124; color: #fff; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="flex justify-between">
            <div>
                <h1>Análisis de Parent ASIN</h1>
                <span class="brand-badge">Marca Analizada: <span id="brandName">NaturaleBio</span></span>
            </div>
            <div style="text-align: right;">
                <p class="text-sub">Última Actualización</p>
                <h3 style="margin:0;">2026-01</h3>
            </div>
        </div>
    </header>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('static')">Reporte Estratégico</button>
        <button class="tab-btn" onclick="switchTab('interactive')">Comparador Interactivo</button>
    </div>

    <!-- Pestaña 1: Reporte Estático -->
    <div id="static" class="tab-content active">
        <!-- Section 1: Global Trend -->
        <div class="card">
            <div class="mb-4">
                <div class="text-xl">1. Tendencia Global del Parent</div>
                <div class="text-sub">Volumen de Clicks vs Cuota de Mercado (Click Share)</div>
            </div>
            <div id="trend_chart" style="width: 100%; height: 400px;"></div>
            <div class="insight-item" style="margin-top: 16px;">
                <h4>Insight de Tendencia</h4>
                <p id="trend_insight_text">Cargando análisis...</p>
            </div>
        </div>

        <!-- Section 2: Brand Competitiveness -->
        <div class="card">
            <div class="mb-4">
                <div class="text-xl">2. Competitividad de Marca</div>
                <div class="text-sub">Evolución de Click Share: Nosotros vs Top 3 Competidores</div>
            </div>
            <div id="comp_chart" style="width: 100%; height: 400px;"></div>
        </div>

        <div class="grid-2">
            <!-- Section 3: Palancas (Levers) -->
            <div class="card">
                <div class="mb-4">
                    <div class="text-xl">3. Palancas & Precio</div>
                    <div class="text-sub">Impacto de Precio y Promociones</div>
                </div>
                <div style="padding: 16px; background: #f8f9fa; border-radius: 8px;">
                    <div class="flex" style="gap: 12px; margin-bottom: 12px;">
                        <span class="material-icons" style="color: #4285F4;">sell</span>
                        <div>
                            <strong>Análisis de Precio:</strong>
                            <p id="price_insight_text" class="text-sub">Calculando...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Efficiency -->
            <div class="card">
                <div class="mb-4">
                    <div class="text-xl">4. Eficiencia (Rank vs Share)</div>
                    <div class="text-sub">Última Semana | ¿Superamos la expectativa de rango?</div>
                </div>
                <div id="eff_chart" style="width: 100%; height: 300px;"></div>
            </div>
        </div>

        <!-- Section 5: Conclusions & Recommendations -->
        <div class="card" style="border-left: 6px solid #34A853;">
            <div class="mb-4">
                <div class="text-xl">5. Conclusiones y Acciones Recomendadas</div>
            </div>
            <div class="grid-2">
                <div>
                    <h4 style="color: #34A853;">Insights Clave</h4>
                    <ul style="padding-left: 20px; color: var(--text-sub);">
                        <li>La tendencia general muestra una recuperación en la última semana tras una caída previa.</li>
                        <li>Nuestra marca domina en cuota de mercado, pero competidores como <strong>NORITUAL LAB</strong> están ganando tracción.</li>
                        <li>Existe una brecha de precio significativa. Nuestros productos premium mantienen cuota a pesar del precio alto, lo que indica alta lealtad o diferenciación percibida.</li>
                        <li>La eficiencia orgánica es alta (Rank 2-5 genera >10% share), pero listings secundarios (Rank >20) diluyen el promedio.</li>
                        <li>El uso de cupones por parte de competidores ("Special Leaves") está correlacionado con sus picos de crecimiento.</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #4285F4;">Recomendaciones</h4>
                    <div class="rec-item">
                        <span class="material-icons rec-icon">trending_up</span>
                        <div><strong>Defender Posición Premium:</strong> No entrar en guerra de precios. Reforzar imágenes y A+ content para justificar el precio superior.</div>
                    </div>
                    <div class="rec-item">
                        <span class="material-icons rec-icon">local_offer</span>
                        <div><strong>Test de Cupones:</strong> Activar cupón del 5% en ASINs secundarios (Rank >10) para recuperar visibilidad frente a ofertas agresivas.</div>
                    </div>
                    <div class="rec-item">
                        <span class="material-icons rec-icon">search</span>
                        <div><strong>Defensa de Keywords:</strong> Monitorizar "Matcha Ceremonial" donde NORITUAL LAB está atacando agresivamente.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pestaña 2: Interactivo -->
    <div id="interactive" class="tab-content">
        <div class="card">
            <div class="mb-4">
                <div class="text-xl">Explorador de Mercado</div>
                <div class="text-sub">Analiza ASIN por ASIN</div>
            </div>
            
            <div class="controls">
                <div>
                    <label style="display:block; font-size:0.8rem; color:#5f6368; margin-bottom:4px;">Semana</label>
                    <select id="weekSelector" onchange="updateInteractive()"></select>
                </div>
                <div>
                    <label style="display:block; font-size:0.8rem; color:#5f6368; margin-bottom:4px;">Filtrar por Marca</label>
                    <select id="brandSelector" onchange="updateInteractive()">
                        <option value="ALL">Todas las Marcas</option>
                    </select>
                </div>
            </div>

            <div style="overflow-x: auto;">
                <table class="comp-table">
                    <thead>
                        <tr>
                            <th>ASIN</th>
                            <th>Título / Producto</th>
                            <th>Marca</th>
                            <th>Precio</th>
                            <th>Rank Org.</th>
                            <th>Share %</th>
                            <th>Badges</th>
                        </tr>
                    </thead>
                    <tbody id="interactiveTableBody">
                        <!-- JS inyectará filas aquí -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>

<script type="text/javascript">
    // --- DATOS INYECTADOS DESDE PYTHON ---
    const dataPackage = {"chart1": [["2025-52", 10412.372982, 18454.178226, 36.070720423000665], ["2026-01", 6102.223146, 9948.865802, 38.01750252440256]], "chart2": [["2025-52", 36.070720423000665, 44.92729676140119, 9.352280237937874, 5.617977528089888, 4.031725049570383], ["2026-01", 38.017502524402566, 44.96802423426456, 5.301245371928644, 5.048805116122518, 6.664422753281698]], "chart4": [[2.0, 12.9, "point { size: 6; fill-color: #4285F4; }", "NaturaleBio | Price: 14.6075"], [6.0, 7.38, "point { size: 4; fill-color: #999; }", "NORITUAL LAB | Price: 15.5575"], [5.0, 3.35, "point { size: 6; fill-color: #4285F4; }", "NaturaleBio | Price: 10.2225"], [16.0, 3.0, "point { size: 4; fill-color: #999; }", "Special Leaves | Price: 10.39"], [2.0, 19.34, "point { size: 4; fill-color: #999; }", "NORITUAL LAB | Price: 23.91"], [10.0, 2.39, "point { size: 4; fill-color: #999; }", "bioKontor | Price: 11.9975"], [0, 2.68, "point { size: 6; fill-color: #4285F4; }", "NaturaleBio | Price: 30.27"], [9.0, 3.15, "point { size: 4; fill-color: #999; }", "VAHDAM | Price: 10.43"], [5.0, 3.66, "point { size: 6; fill-color: #4285F4; }", "NaturaleBio | Price: 24.5275"], [19.0, 1.57, "point { size: 4; fill-color: #999; }", "UNREAL\u00ae | Price: 31.2725"]], "top3": ["NORITUAL LAB", "VAHDAM", "Special Leaves"], "our_brand": "NaturaleBio", "insights": {"trend": "En la \u00faltima semana (2026-01), la marca NaturaleBio tiene un Click Share global del 38.0%, creciendo respecto a la semana anterior (36.1%).", "price": "Tu precio promedio (19.91) es un 15.3% m\u00e1s alto que la competencia."}, "raw_data": [{"week": "2026-01", "brand": "NaturaleBio", "is_ours": true, "asin": "B06XQ5DCYJ", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 14.6075, "rank": 2.0, "share": 12.9, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2026-01", "brand": "NORITUAL LAB", "is_ours": false, "asin": "B0FSL3C3Z8", "title": "Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...", "price": 15.5575, "rank": 6.0, "share": 7.38, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2025-52", "brand": "Special Leaves", "is_ours": false, "asin": "B0DRP6Y6XC", "title": "Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...", "price": 10.71, "rank": 13.0, "share": 3.4, "deal": 0, "coupon": 7, "choice": 0}, {"week": "2025-52", "brand": "NORITUAL LAB", "is_ours": false, "asin": "B0CNRX8G5S", "title": "Ceremonial Matcha - Reines Matcha Pulver aus Japan...", "price": 24.648571429, "rank": 2.0, "share": 18.77, "deal": 0, "coupon": 0, "choice": 7}, {"week": "2025-52", "brand": "bioKontor", "is_ours": false, "asin": "B08XVX8V1T", "title": "Bio Matcha Pulver 100 g \u2013 Japan Matcha Tee, 100% n...", "price": 12.367142857, "rank": 10.0, "share": 2.44, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2025-52", "brand": "NaturaleBio", "is_ours": true, "asin": "B07SZFD3P9", "title": "NaturaleBio Matcha Ceremonial Grade 100g. Original...", "price": 30.704285714, "rank": 23.0, "share": 2.93, "deal": 1, "coupon": 0, "choice": 0}, {"week": "2025-52", "brand": "VAHDAM", "is_ours": false, "asin": "B07MD4LB49", "title": "VAHDAM, Matcha Gr\u00fcntee Pulver (100g, 50+ Tassen) A...", "price": 9.895714286, "rank": 7.0, "share": 4.19, "deal": 3, "coupon": 0, "choice": 0}, {"week": "2025-52", "brand": "VAHDAM", "is_ours": false, "asin": "B07K1WBH4K", "title": "VAHDAM, Vanille Matcha Gr\u00fcner Tee Pulver (100g, 50...", "price": 9.895714286, "rank": 20.0, "share": 1.47, "deal": 3, "coupon": 0, "choice": 0}, {"week": "2025-52", "brand": "NaturaleBio", "is_ours": true, "asin": "B079VQ52MK", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 24.855714286, "rank": 5.0, "share": 3.49, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2025-52", "brand": "NaturaleBio", "is_ours": true, "asin": "B06XQ69YCQ", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 10.538571429, "rank": 4.0, "share": 3.75, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2026-01", "brand": "NaturaleBio", "is_ours": true, "asin": "B06XQ69YCQ", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 10.2225, "rank": 5.0, "share": 3.35, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2025-52", "brand": "NaturaleBio", "is_ours": true, "asin": "B06XQ5DCYJ", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 15.058571429, "rank": 2.0, "share": 11.66, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2026-01", "brand": "Special Leaves", "is_ours": false, "asin": "B0DRP6Y6XC", "title": "Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...", "price": 10.39, "rank": 16.0, "share": 3.0, "deal": 0, "coupon": 4, "choice": 0}, {"week": "2026-01", "brand": "NORITUAL LAB", "is_ours": false, "asin": "B0CNRX8G5S", "title": "Ceremonial Matcha - Reines Matcha Pulver aus Japan...", "price": 23.91, "rank": 2.0, "share": 19.34, "deal": 0, "coupon": 0, "choice": 4}, {"week": "2026-01", "brand": "bioKontor", "is_ours": false, "asin": "B08XVX8V1T", "title": "Bio Matcha Pulver 100 g \u2013 Japan Matcha Tee, 100% n...", "price": 11.9975, "rank": 10.0, "share": 2.39, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2026-01", "brand": "NaturaleBio", "is_ours": true, "asin": "B07SZFD3P9", "title": "NaturaleBio Matcha Ceremonial Grade 100g. Original...", "price": 30.27, "rank": 100.0, "share": 2.68, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2026-01", "brand": "VAHDAM", "is_ours": false, "asin": "B07MD4LB49", "title": "VAHDAM, Matcha Gr\u00fcntee Pulver (100g, 50+ Tassen) A...", "price": 10.43, "rank": 9.0, "share": 3.15, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2026-01", "brand": "NaturaleBio", "is_ours": true, "asin": "B079VQ52MK", "title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "price": 24.5275, "rank": 5.0, "share": 3.66, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2025-52", "brand": "NORITUAL LAB", "is_ours": false, "asin": "B0FSL3C3Z8", "title": "Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...", "price": 16.037142857, "rank": 6.0, "share": 8.42, "deal": 0, "coupon": 0, "choice": 0}, {"week": "2026-01", "brand": "UNREAL\u00ae", "is_ours": false, "asin": "B0F9B1LWQQ", "title": "UNREAL\u00ae 100g Ceremonial Bio Matcha \u2013 100% Japanisc...", "price": 31.2725, "rank": 19.0, "share": 1.57, "deal": 0, "coupon": 0, "choice": 0}]};

    // Google Charts Init
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(initDashboard);

    function initDashboard() {
        drawTrendChart();
        drawCompChart();
        drawEfficiencyChart();
        fillInsights();
        initInteractive();
    }

    // 1. Trend Chart
    function drawTrendChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Semana');
        data.addColumn('number', 'Mis Clicks');
        data.addColumn('number', 'Clicks Competencia');
        data.addColumn('number', 'Mi Click Share %');
        
        data.addRows(dataPackage.chart1);

        var options = {
            seriesType: 'bars',
            series: {2: {type: 'line', targetAxisIndex: 1, color: '#4285F4', lineWidth: 3}},
            colors: ['#8AB4F8', '#dadce0'],
            vAxes: {0: {title: 'Volumen Estimado'}, 1: {title: 'Click Share %', format: '#\'%\''}},
            legend: {position: 'bottom'},
            chartArea: {width: '85%', height: '75%'},
            animation: {startup: true, duration: 1000, easing: 'out'}
        };

        var chart = new google.visualization.ComboChart(document.getElementById('trend_chart'));
        chart.draw(data, options);
    }

    // 2. Competitiveness Chart
    function drawCompChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Semana');
        data.addColumn('number', dataPackage.our_brand);
        
        // Dynamic Columns for Competitors
        var top3 = dataPackage.top3;
        top3.forEach(c => data.addColumn('number', c));
        data.addColumn('number', 'Resto');

        data.addRows(dataPackage.chart2);

        var options = {
            curveType: 'function',
            lineWidth: 2,
            colors: ['#4285F4', '#EA4335', '#FBBC05', '#34A853', '#9aa0a6'],
            vAxis: {title: 'Click Share %'},
            legend: {position: 'bottom'},
            chartArea: {width: '90%', height: '75%'}
        };

        var chart = new google.visualization.LineChart(document.getElementById('comp_chart'));
        chart.draw(data, options);
    }

    // 4. Efficiency Chart
    function drawEfficiencyChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('number', 'Rank Orgánico');
        data.addColumn('number', 'Click Share %');
        data.addColumn({type: 'string', role: 'style'});
        data.addColumn({type: 'string', role: 'tooltip'});

        data.addRows(dataPackage.chart4);

        var options = {
            hAxis: {title: 'Rank Orgánico (Menor es mejor)', direction: 1}, // Normal direction: 1, 2, 3...
            vAxis: {title: 'Click Share %'},
            legend: 'none',
            chartArea: {width: '85%', height: '80%'},
            pointSize: 5
        };

        var chart = new google.visualization.ScatterChart(document.getElementById('eff_chart'));
        chart.draw(data, options);
    }

    // Fill Text Insights
    function fillInsights() {
        document.getElementById('brandName').innerText = dataPackage.our_brand;
        document.getElementById('trend_insight_text').innerText = dataPackage.insights.trend;
        document.getElementById('price_insight_text').innerText = dataPackage.insights.price;
    }

    // Interactive Tab Logic
    function initInteractive() {
        const weeks = [...new Set(dataPackage.raw_data.map(d => d.week))].sort();
        const brands = [...new Set(dataPackage.raw_data.map(d => d.brand))].sort();
        
        const weekSel = document.getElementById('weekSelector');
        weeks.forEach(w => {
            let opt = document.createElement('option');
            opt.value = w;
            opt.innerText = w;
            weekSel.appendChild(opt);
        });
        // Select latest week by default
        if(weeks.length > 0) weekSel.value = weeks[weeks.length-1];

        const brandSel = document.getElementById('brandSelector');
        brands.forEach(b => {
            let opt = document.createElement('option');
            opt.value = b;
            opt.innerText = b;
            brandSel.appendChild(opt);
        });

        updateInteractive();
    }

    function updateInteractive() {
        const week = document.getElementById('weekSelector').value;
        const brand = document.getElementById('brandSelector').value;
        const tbody = document.getElementById('interactiveTableBody');
        tbody.innerHTML = '';

        const filtered = dataPackage.raw_data.filter(d => {
            return d.week === week && (brand === 'ALL' || d.brand === brand);
        });

        // Sort by Share Descending
        filtered.sort((a, b) => b.share - a.share);

        filtered.forEach(item => {
            const tr = document.createElement('tr');
            
            let badges = '';
            if(item.deal > 0) badges += `<span class="badge-deal">DEAL</span> `;
            if(item.choice > 0) badges += `<span class="badge-choice">CHOICE</span>`;
            
            tr.innerHTML = `
                <td style="font-family:monospace; color:var(--primary);">${item.asin}</td>
                <td style="font-size:0.9rem;">${item.title}</td>
                <td>${item.brand}</td>
                <td>${item.price.toFixed(2)} €</td>
                <td>${item.rank}</td>
                <td><strong>${item.share.toFixed(2)}%</strong></td>
                <td>${badges}</td>
            `;
            tbody.appendChild(tr);
        });
    }

    // Tab Switcher
    function switchTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.currentTarget.classList.add('active');
        
        // Redraw charts if unhidden to fix size issues
        if(tabId === 'static') {
            drawTrendChart();
            drawCompChart();
            drawEfficiencyChart();
        }
    }
    
    // Resize Handler
    window.onresize = function(){
        drawTrendChart();
        drawCompChart();
        drawEfficiencyChart();
    };
</script>

</body>
</html>