<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Inteligencia de Mercado: Psyllium</title>
    
    <!-- Google Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Google Charts Loader -->
    <script src="https://www.gstatic.com/charts/loader.js"></script>

    <style>
        /* CSS Reset & Variables */
        :root {
            --primary: #4285F4;
            --secondary: #34A853;
            --warning: #FBBC05;
            --danger: #EA4335;
            --bg-body: #F5F5F7;
            --bg-card: #FFFFFF;
            --text-main: #1D1D1F;
            --text-secondary: #86868B;
            --border-radius: 16px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.5;
            padding: 20px;
        }

        /* Layout */
        .container {
            max-width: 1280px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 { font-size: 24px; font-weight: 600; }
        .subtitle { color: var(--text-secondary); font-size: 14px; }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            background: white;
            padding: 6px;
            border-radius: 12px;
            width: fit-content;
            box-shadow: var(--shadow);
        }

        .tab-btn {
            border: none;
            background: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab-btn.active {
            background-color: var(--primary);
            color: white;
            box-shadow: 0 2px 4px rgba(66, 133, 244, 0.3);
        }

        /* Content Sections */
        .section { display: none; animation: fadeIn 0.4s ease; }
        .section.active { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* KPI Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .card {
            background: var(--bg-card);
            border-radius: var(--border-radius);
            padding: 24px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(0,0,0,0.02);
        }

        .kpi-title { font-size: 13px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600; }
        .kpi-value { font-size: 32px; font-weight: 700; margin: 8px 0; color: var(--text-main); }
        .kpi-trend { font-size: 14px; display: flex; align-items: center; gap: 4px; }
        .trend-up { color: var(--secondary); }
        .trend-down { color: var(--danger); }

        /* Charts Grid */
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }
        .full-width { grid-column: span 2; }
        
        .chart-container {
            height: 350px;
            width: 100%;
        }

        .chart-header {
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chart-title { font-size: 18px; font-weight: 600; }

        /* Insights & Recommendations */
        .insights-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .insight-item {
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #eee;
        }
        .insight-item:last-child { border-bottom: none; }
        .insight-icon { vertical-align: middle; margin-right: 8px; color: var(--primary); }
        .insight-text { font-size: 15px; color: #444; }

        .rec-list li {
            margin-bottom: 12px;
            font-size: 14px;
            padding-left: 20px;
            position: relative;
        }
        .rec-list li::before {
            content: "â€¢";
            color: var(--primary);
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        /* Interactive Section */
        .controls {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
        }
        select {
            padding: 10px 16px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background: white;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
        }

        .comp-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .comp-table th { text-align: left; padding: 12px; color: var(--text-secondary); font-size: 12px; border-bottom: 1px solid #eee; }
        .comp-table td { padding: 12px; font-size: 14px; border-bottom: 1px solid #f5f5f5; }
        .badge-our { background: #e8f0fe; color: var(--primary); padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 600; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <div>
            <h1>Inteligencia de Mercado: Psyllium</h1>
            <div class="subtitle">AnÃ¡lisis profundo del Parent ASIN | Marca: <strong style="color:var(--primary)">NaturaleBio</strong></div>
        </div>
        <div style="text-align: right;">
            <div class="subtitle">Ãšltima semana de datos</div>
            <strong id="header-date">...</strong>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('report')">Reporte EstratÃ©gico</button>
        <button class="tab-btn" onclick="switchTab('interactive')">Comparador Competitivo</button>
    </div>

    <!-- TAB 1: STATIC REPORT -->
    <div id="report" class="section active">
        
        <!-- KPI Row -->
        <div class="kpi-grid">
            <div class="card">
                <div class="kpi-title">Click Share Total</div>
                <div class="kpi-value" id="kpi-share">--%</div>
                <div class="kpi-trend" id="kpi-share-trend">-- vs avg</div>
            </div>
            <div class="card">
                <div class="kpi-title">Organic Rank Promedio</div>
                <div class="kpi-value" id="kpi-rank">#--</div>
                <div class="kpi-trend"><span class="material-icons" style="font-size:16px">verified</span> Top Position</div>
            </div>
            <div class="card">
                <div class="kpi-title">Precio Promedio</div>
                <div class="kpi-value" id="kpi-price">â‚¬--</div>
                <div class="kpi-trend">vs Competencia: <span id="kpi-price-comp">--</span></div>
            </div>
            <div class="card">
                <div class="kpi-title">Palancas Activas</div>
                <div class="kpi-value" id="kpi-levers">--</div>
                <div class="kpi-trend">Deals & Coupons</div>
            </div>
        </div>

        <!-- Charts Row 1 -->
        <div class="chart-grid">
            <div class="card full-width">
                <div class="chart-header">
                    <div class="chart-title">Tendencia Global del Parent</div>
                    <div class="subtitle">Volumen de BÃºsqueda (Barras) vs Click Share de NaturaleBio (LÃ­nea)</div>
                </div>
                <div id="chart_trend" class="chart-container"></div>
            </div>
        </div>

        <!-- Charts Row 2 -->
        <div class="chart-grid">
            <div class="card">
                <div class="chart-header">
                    <div class="chart-title">Competitividad de Marca</div>
                    <div class="subtitle">Click Share: Nosotros vs Top 3 Competidores</div>
                </div>
                <div id="chart_brand" class="chart-container"></div>
            </div>
            <div class="card">
                <div class="chart-header">
                    <div class="chart-title">Matriz de Eficiencia (Rank vs Share)</div>
                    <div class="subtitle">Cada punto es un ASIN (Semana Actual)</div>
                </div>
                <div id="chart_scatter" class="chart-container"></div>
            </div>
        </div>

        <!-- Insights Section -->
        <div class="insights-grid">
            <div class="card">
                <div class="chart-header">
                    <div class="chart-title">ðŸ’¡ Insights Clave del Analista</div>
                </div>
                <div id="insights-container">
                    <!-- Dynamic Content -->
                </div>
            </div>
            <div class="card" style="background-color: #F2F8FF; border: 1px solid #D6E4FF;">
                <div class="chart-header">
                    <div class="chart-title" style="color: var(--primary);">ðŸš€ Acciones Recomendadas</div>
                </div>
                <ul class="rec-list" id="recommendations-container">
                    <!-- Dynamic Content -->
                </ul>
            </div>
        </div>
    </div>

    <!-- TAB 2: INTERACTIVE LAB -->
    <div id="interactive" class="section">
        <div class="controls">
            <div>
                <label style="font-size:12px; font-weight:600; display:block; margin-bottom:4px;">Semana</label>
                <select id="sel-week" onchange="updateInteractive()"></select>
            </div>
            <div>
                <label style="font-size:12px; font-weight:600; display:block; margin-bottom:4px;">Comparar contra</label>
                <select id="sel-comp" onchange="updateInteractive()"></select>
            </div>
        </div>

        <div class="kpi-grid">
            <div class="card">
                <div class="kpi-title">Precio: Nosotros vs Rival</div>
                <div class="kpi-value" id="comp-price-diff">--</div>
                <div class="kpi-trend" id="comp-price-val">--</div>
            </div>
            <div class="card">
                <div class="kpi-title">Click Share Gap</div>
                <div class="kpi-value" id="comp-share-diff">--</div>
                <div class="kpi-trend" id="comp-share-val">--</div>
            </div>
            <div class="card">
                <div class="kpi-title">Rank Gap</div>
                <div class="kpi-value" id="comp-rank-diff">--</div>
                <div class="kpi-trend">Posiciones de diferencia</div>
            </div>
        </div>

        <div class="card">
            <div class="chart-title">Detalle de ASINs en la Semana Seleccionada</div>
            <div id="table_div" style="margin-top: 20px;"></div>
        </div>
    </div>

</div>

<!-- DATA & LOGIC -->
<script>
    // 1. INJECTED DATA (FROM PYTHON)
    const marketData = [
        {"week_date": "2025-51", "real_brand": "NaturaleBio", "click_share": 22.1, "estimated_clicks": 2164.98, "price": 8.89, "average_organic_rank": 1, "is_yaba_asin": "Y", "weekly_search_volume": 9796.29, "product_title": "NaturaleBio Organic Psyllium Husk", "coupon": 0},
        {"week_date": "2025-51", "real_brand": "WeightWorld", "click_share": 9.39, "estimated_clicks": 919.87, "price": 10.27, "average_organic_rank": 10, "is_yaba_asin": "N", "weekly_search_volume": 9796.29, "product_title": "WeightWorld Organic Psyllium", "coupon": 0},
        {"week_date": "2025-51", "real_brand": "Solgar", "click_share": 3.95, "estimated_clicks": 386.95, "price": 15.05, "average_organic_rank": 6, "is_yaba_asin": "N", "weekly_search_volume": 9796.29, "product_title": "Solgar Psyllium Husks", "coupon": 7},
        {"week_date": "2025-51", "real_brand": "Natural Health 4 Life", "click_share": 6.22, "estimated_clicks": 609.32, "price": 17.49, "average_organic_rank": 9, "is_yaba_asin": "N", "weekly_search_volume": 9796.29, "product_title": "Natural Health 4 Life", "coupon": 0},
        {"week_date": "2025-51", "real_brand": "NEW LEAF PRODUCTS", "click_share": 12.54, "estimated_clicks": 1228.45, "price": 13.29, "average_organic_rank": 3, "is_yaba_asin": "N", "weekly_search_volume": 9796.29, "product_title": "Fibre Supplement 4000mg", "coupon": 0},
        {"week_date": "2025-51", "real_brand": "NKD Living", "click_share": 13.67, "estimated_clicks": 1339.15, "price": 9.99, "average_organic_rank": 4, "is_yaba_asin": "N", "weekly_search_volume": 9796.29, "product_title": "NKD Living Psyllium", "coupon": 0},
        {"week_date": "2025-52", "real_brand": "NaturaleBio", "click_share": 22.7, "estimated_clicks": 336.82, "price": 8.89, "average_organic_rank": 2, "is_yaba_asin": "Y", "weekly_search_volume": 1483.79, "product_title": "NaturaleBio Organic Psyllium Husk", "coupon": 0},
        {"week_date": "2025-52", "real_brand": "NEW LEAF PRODUCTS", "click_share": 13.35, "estimated_clicks": 198.08, "price": 13.29, "average_organic_rank": 3, "is_yaba_asin": "N", "weekly_search_volume": 1483.79, "product_title": "Fibre Supplement 4000mg", "coupon": 0},
        {"week_date": "2025-52", "real_brand": "Natural Health 4 Life", "click_share": 11.81, "estimated_clicks": 175.23, "price": 17.49, "average_organic_rank": 6, "is_yaba_asin": "N", "weekly_search_volume": 1483.79, "product_title": "Natural Health 4 Life", "coupon": 0},
        {"week_date": "2025-52", "real_brand": "NKD Living", "click_share": 12.82, "estimated_clicks": 190.22, "price": 9.99, "average_organic_rank": 3.5, "is_yaba_asin": "N", "weekly_search_volume": 1483.79, "product_title": "NKD Living Psyllium", "coupon": 0},
        {"week_date": "2026-01", "real_brand": "NaturaleBio", "click_share": 23.34, "estimated_clicks": 1581.79, "price": 8.89, "average_organic_rank": 2, "is_yaba_asin": "Y", "weekly_search_volume": 6777.17, "product_title": "NaturaleBio Organic Psyllium Husk", "coupon": 0},
        {"week_date": "2026-01", "real_brand": "NEW LEAF PRODUCTS", "click_share": 9.71, "estimated_clicks": 658.06, "price": 13.29, "average_organic_rank": 3, "is_yaba_asin": "N", "weekly_search_volume": 6777.17, "product_title": "Fibre Supplement 4000mg", "coupon": 0},
        {"week_date": "2026-01", "real_brand": "NKD Living", "click_share": 11.68, "estimated_clicks": 791.57, "price": 9.99, "average_organic_rank": 4, "is_yaba_asin": "N", "weekly_search_volume": 6777.17, "product_title": "NKD Living Psyllium", "coupon": 0},
        {"week_date": "2026-01", "real_brand": "Natural Health 4 Life", "click_share": 12.84, "estimated_clicks": 870.18, "price": 17.62, "average_organic_rank": 7, "is_yaba_asin": "N", "weekly_search_volume": 6777.17, "product_title": "Natural Health 4 Life", "coupon": 0},
        {"week_date": "2026-01", "real_brand": "WeightWorld", "click_share": 8.81, "estimated_clicks": 597.06, "price": 11.96, "average_organic_rank": 5, "is_yaba_asin": "N", "weekly_search_volume": 6777.17, "product_title": "WeightWorld Organic Psyllium", "coupon": 0}
    ];

    const generatedInsights = [
        "Tendencia Global: Nuestra marca (NaturaleBio) muestra un crecimiento sÃ³lido en la Ãºltima semana, alcanzando un 23.34% de Click Share frente al 22.4% promedio anterior.",
        "Competencia: Los rivales mÃ¡s fuertes son Natural Health 4 Life (12.8%) y NKD Living (11.7%). New Leaf Products ha perdido fuerza cayendo al 9.7%.",
        "Eficiencia: Nuestro Organic Rank promedio se mantiene en #2, lo cual es excelente y justifica el liderazgo en cuota de mercado.",
        "Riesgos: Aunque dominamos, competidores como NKD Living tienen precios mÃ¡s altos (â‚¬9.99 vs nuestros â‚¬8.89) y mantienen buena cuota, sugiriendo alta fidelidad de marca."
    ];

    const generatedRecs = [
        "Mantener el precio competitivo de â‚¬8.89 ya que estÃ¡ impulsando el volumen.",
        "Monitorear si Natural Health 4 Life activa cupones, ya que es la amenaza mÃ¡s cercana en crecimiento.",
        "Evaluar probar un precio ligeramente superior (â‚¬9.49) para testear elasticidad, dado que el lÃ­der en precio (NKD) estÃ¡ en â‚¬9.99."
    ];

    const metaInfo = {
        lastWeek: "2026-01",
        ourBrand: "NaturaleBio",
        topCompetitors: ["Natural Health 4 Life", "NKD Living", "NEW LEAF PRODUCTS"]
    };

    // 2. GOOGLE CHARTS INIT
    google.charts.load('current', {'packages':['corechart', 'table']});
    google.charts.setOnLoadCallback(initDashboard);

    function initDashboard() {
        populateText();
        drawCharts();
        setupInteractive();
    }

    // 3. TEXT POPULATION
    function populateText() {
        document.getElementById('header-date').textContent = metaInfo.lastWeek;
        
        // Insights
        const insightContainer = document.getElementById('insights-container');
        generatedInsights.forEach(text => {
            const div = document.createElement('div');
            div.className = 'insight-item';
            div.innerHTML = `<span class="material-icons insight-icon">insights</span><span class="insight-text">${text}</span>`;
            insightContainer.appendChild(div);
        });

        // Recs
        const recContainer = document.getElementById('recommendations-container');
        generatedRecs.forEach(text => {
            const li = document.createElement('li');
            li.textContent = text;
            recContainer.appendChild(li);
        });

        // KPIs (Last Week Calculation)
        const lastWeekData = marketData.filter(d => d.week_date === metaInfo.lastWeek && d.real_brand === metaInfo.ourBrand);
        const lastWeekShare = lastWeekData.reduce((a,b) => a + b.click_share, 0);
        const lastWeekRank = lastWeekData.length ? lastWeekData[0].average_organic_rank : 0;
        const lastWeekPrice = lastWeekData.length ? lastWeekData[0].price : 0;

        document.getElementById('kpi-share').textContent = lastWeekShare.toFixed(2) + '%';
        document.getElementById('kpi-share-trend').innerHTML = '<span class="trend-up material-icons" style="font-size:16px">trending_up</span> vs prev avg';
        document.getElementById('kpi-rank').textContent = '#' + lastWeekRank;
        document.getElementById('kpi-price').textContent = 'â‚¬' + lastWeekPrice;
        
        // Price Comp
        const compData = marketData.filter(d => d.week_date === metaInfo.lastWeek && d.real_brand !== metaInfo.ourBrand);
        const avgCompPrice = compData.reduce((a,b) => a + b.price, 0) / compData.length;
        document.getElementById('kpi-price-comp').textContent = 'â‚¬' + avgCompPrice.toFixed(2);
        
        document.getElementById('kpi-levers').textContent = lastWeekData[0].coupon > 0 ? "Coupon Active" : "None";
    }

    // 4. CHART DRAWING LOGIC
    function drawCharts() {
        // --- A. TREND CHART (Combo) ---
        const weeks = [...new Set(marketData.map(d => d.week_date))].sort();
        const trendData = [['Semana', 'Volumen BÃºsqueda', 'Share ' + metaInfo.ourBrand]];
        
        weeks.forEach(w => {
            const vol = marketData.find(d => d.week_date === w).weekly_search_volume; // Take distinct volume
            const share = marketData.filter(d => d.week_date === w && d.real_brand === metaInfo.ourBrand)
                                    .reduce((a,b) => a + b.click_share, 0);
            trendData.push([w, vol, share]);
        });

        const dtTrend = google.visualization.arrayToDataTable(trendData);
        const optTrend = {
            seriesType: 'bars',
            series: {1: {type: 'line', targetAxisIndex: 1}},
            vAxes: {0: {title: 'Volumen'}, 1: {title: 'Click Share (%)', format: '#\'%\''}},
            colors: ['#E0E0E0', '#4285F4'],
            legend: {position: 'bottom'},
            chartArea: {width: '85%', height: '75%'},
            bar: {groupWidth: "50%"}
        };
        new google.visualization.ComboChart(document.getElementById('chart_trend')).draw(dtTrend, optTrend);

        // --- B. COMPETITIVENESS CHART (Line) ---
        const brandSet = [metaInfo.ourBrand, ...metaInfo.topCompetitors];
        const lineHeader = ['Semana', ...brandSet];
        const lineData = [lineHeader];

        weeks.forEach(w => {
            const row = [w];
            brandSet.forEach(b => {
                const val = marketData.filter(d => d.week_date === w && d.real_brand === b)
                                      .reduce((sum, item) => sum + item.click_share, 0);
                row.push(val);
            });
            lineData.push(row);
        });

        const dtBrand = google.visualization.arrayToDataTable(lineData);
        const optBrand = {
            curveType: 'function',
            legend: {position: 'bottom'},
            chartArea: {width: '90%', height: '75%'},
            colors: ['#4285F4', '#EA4335', '#FBBC05', '#34A853'],
            lineWidth: 3
        };
        new google.visualization.LineChart(document.getElementById('chart_brand')).draw(dtBrand, optBrand);

        // --- C. EFFICIENCY SCATTER (Scatter) ---
        // Filter for Last Week only
        const scatterRaw = [['Rank', 'Click Share', {'type': 'string', 'role': 'style'}, {'type': 'string', 'role': 'tooltip'}]];
        marketData.filter(d => d.week_date === metaInfo.lastWeek).forEach(d => {
            const color = d.real_brand === metaInfo.ourBrand ? '#4285F4' : '#999';
            const tooltip = `${d.real_brand}\nRank: ${d.average_organic_rank}\nShare: ${d.click_share}%`;
            scatterRaw.push([d.average_organic_rank, d.click_share, `point {fill-color: ${color}; size: 10}`, tooltip]);
        });

        const dtScatter = google.visualization.arrayToDataTable(scatterRaw);
        const optScatter = {
            legend: 'none',
            hAxis: {title: 'Organic Rank (Menor es mejor)', direction: 1},
            vAxis: {title: 'Click Share (%)'},
            chartArea: {width: '85%', height: '80%'}
        };
        new google.visualization.ScatterChart(document.getElementById('chart_scatter')).draw(dtScatter, optScatter);
    }

    // 5. INTERACTIVE LOGIC
    function setupInteractive() {
        const weekSel = document.getElementById('sel-week');
        const weeks = [...new Set(marketData.map(d => d.week_date))].sort().reverse();
        weeks.forEach(w => {
            const opt = document.createElement('option');
            opt.value = w;
            opt.text = w;
            weekSel.appendChild(opt);
        });

        const compSel = document.getElementById('sel-comp');
        metaInfo.topCompetitors.forEach(c => {
            const opt = document.createElement('option');
            opt.value = c;
            opt.text = c;
            compSel.appendChild(opt);
        });

        updateInteractive();
    }

    function updateInteractive() {
        const week = document.getElementById('sel-week').value;
        const comp = document.getElementById('sel-comp').value;

        // Get Data
        const ourData = marketData.find(d => d.week_date === week && d.real_brand === metaInfo.ourBrand) || {};
        const compData = marketData.find(d => d.week_date === week && d.real_brand === comp) || {};

        // Update Cards
        const priceDiff = ((ourData.price || 0) - (compData.price || 0)).toFixed(2);
        document.getElementById('comp-price-diff').textContent = (priceDiff > 0 ? '+' : '') + priceDiff + 'â‚¬';
        document.getElementById('comp-price-val').textContent = `Nosotros: â‚¬${ourData.price || 0} vs Ellos: â‚¬${compData.price || 0}`;

        const shareDiff = ((ourData.click_share || 0) - (compData.click_share || 0)).toFixed(2);
        document.getElementById('comp-share-diff').textContent = (shareDiff > 0 ? '+' : '') + shareDiff + '%';
        document.getElementById('comp-share-val').textContent = `Nosotros: ${ourData.click_share || 0}% vs Ellos: ${compData.click_share || 0}%`;

        const rankDiff = (compData.average_organic_rank || 0) - (ourData.average_organic_rank || 0);
        document.getElementById('comp-rank-diff').textContent = (rankDiff > 0 ? 'Ganamos por ' : 'Perdemos por ') + Math.abs(rankDiff);

        // Update Table
        const tableData = new google.visualization.DataTable();
        tableData.addColumn('string', 'Marca');
        tableData.addColumn('string', 'ASIN');
        tableData.addColumn('number', 'Precio (â‚¬)');
        tableData.addColumn('number', 'Rank');
        tableData.addColumn('number', 'Share (%)');
        
        const weekRecords = marketData.filter(d => d.week_date === week).sort((a,b) => b.click_share - a.click_share);
        weekRecords.forEach(r => {
            tableData.addRow([r.real_brand, r.asin, r.price, r.average_organic_rank, r.click_share]);
        });

        const table = new google.visualization.Table(document.getElementById('table_div'));
        table.draw(tableData, {showRowNumber: true, width: '100%', height: '100%'});
    }

    // UTILS
    function switchTab(tabId) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        
        document.getElementById(tabId).classList.add('active');
        event.target.classList.add('active');
    }

</script>

</body>
</html>