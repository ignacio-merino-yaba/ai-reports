<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parent ASIN Analysis Report</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Recharts -->
    <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F7;
            color: #1D1D1F;
            -webkit-font-smoothing: antialiased;
        }

        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(229, 231, 235, 0.5);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.025);
        }

        .tab-active {
            background-color: white;
            color: #007AFF;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .tab-inactive {
            color: #86868B;
        }

        .chart-tooltip {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            padding: 8px 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            font-size: 12px;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div id="root"></div>

    <script type="text/babel">
        // --- DATA INJECTION ---
        const marketData = [{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"NaturaleBio","asin":"B079VQ52MK","product_title":"NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...","is_yaba_asin":"Y","click_share":3.69,"estimated_clicks":2245.301532,"average_organic_rank":5.0,"price":23.075714286,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.13,"brand_category":"My Brand"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"VAHDAM","asin":"B07MD4LB49","product_title":"VAHDAM, Matcha Gr\u00fcntee Pulver (100g, 50+ Tassen) A...","is_yaba_asin":"N","click_share":3.49,"estimated_clicks":2123.604972,"average_organic_rank":8.0,"price":9.005714286,"weekly_number_of_days_with_deal":5.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.25,"brand_category":"Rest of Market"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"Special Leaves","asin":"B0DRP6Y6XC","product_title":"Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...","is_yaba_asin":"N","click_share":3.48,"estimated_clicks":2117.520144,"average_organic_rank":14.0,"price":10.44,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":7.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.53,"brand_category":"Special Leaves"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"NaturaleBio","asin":"B06XQ5DCYJ","product_title":"NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...","is_yaba_asin":"Y","click_share":11.18,"estimated_clicks":6802.837704,"average_organic_rank":2.0,"price":14.084285714,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.15,"brand_category":"My Brand"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"NORITUAL LAB","asin":"B0CNRX8G5S","product_title":"Ceremonial Matcha - Reines Matcha Pulver aus Japan...","is_yaba_asin":"N","click_share":16.66,"estimated_clicks":10137.323448,"average_organic_rank":2.0,"price":24.03,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":7.0,"impression_share":3.14,"brand_category":"NORITUAL LAB"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"NaturaleBio","asin":"B06XQ69YCQ","product_title":"NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...","is_yaba_asin":"Y","click_share":3.85,"estimated_clicks":2342.65878,"average_organic_rank":5.0,"price":9.2,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.15,"brand_category":"My Brand"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"Jean","asin":"B0F5BVFRC1","product_title":"Jean & Len Handcreme I Love You So Matcha, f\u00fcr nor...","is_yaba_asin":"N","click_share":1.92,"estimated_clicks":1168.286976,"average_organic_rank":12.0,"price":3.095714286,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":2.66,"brand_category":"Rest of Market"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"Ceremonial","asin":"B0G1T7N675","product_title":"Ceremonial Matcha Pulver BIO-Qualit\u00e4t 50g ideal zu...","is_yaba_asin":"N","click_share":2.56,"estimated_clicks":1557.715968,"average_organic_rank":12.0,"price":8.898571429,"weekly_number_of_days_with_deal":7.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.71,"brand_category":"Rest of Market"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"Special Leaves","asin":"B0DRP6Y6XC","product_title":"Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...","is_yaba_asin":"N","click_share":3.48,"estimated_clicks":2117.520144,"average_organic_rank":14.0,"price":10.44,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":7.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.53,"brand_category":"Special Leaves"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"NORITUAL LAB","asin":"B0FSL3C3Z8","product_title":"Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...","is_yaba_asin":"N","click_share":8.85,"estimated_clicks":5385.07278,"average_organic_rank":5.0,"price":15.635714286,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.22,"brand_category":"NORITUAL LAB"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"NaturaleBio","asin":"B07SZFD3P9","product_title":"NaturaleBio Matcha Ceremonial Grade 100g. Original...","is_yaba_asin":"Y","click_share":2.95,"estimated_clicks":1795.02426,"average_organic_rank":22.0,"price":26.748571429,"weekly_number_of_days_with_deal":7.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":2.57,"brand_category":"My Brand"},{"week_date":"2025-51","reporting_date":"2025-12-20","competitor_brand":"NORITUAL LAB","asin":"B0FSL3C3Z8","product_title":"Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...","is_yaba_asin":"N","click_share":8.85,"estimated_clicks":5385.07278,"average_organic_rank":5.0,"price":15.635714286,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.22,"brand_category":"NORITUAL LAB"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"Special Leaves","asin":"B0DRP6Y6XC","product_title":"Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...","is_yaba_asin":"N","click_share":3.4,"estimated_clicks":1623.0512,"average_organic_rank":13.0,"price":10.71,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":7.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.7,"brand_category":"Special Leaves"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"NaturaleBio","asin":"B079VQ52MK","product_title":"NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...","is_yaba_asin":"Y","click_share":3.49,"estimated_clicks":1666.01432,"average_organic_rank":5.0,"price":24.855714286,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.36,"brand_category":"My Brand"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"NaturaleBio","asin":"B06XQ69YCQ","product_title":"NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...","is_yaba_asin":"Y","click_share":3.75,"estimated_clicks":1790.13,"average_organic_rank":4.0,"price":10.538571429,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.25,"brand_category":"My Brand"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"NaturaleBio","asin":"B06XQ5DCYJ","product_title":"NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...","is_yaba_asin":"Y","click_share":11.66,"estimated_clicks":5566.11088,"average_organic_rank":2.0,"price":15.058571429,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.37,"brand_category":"My Brand"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"NaturaleBio","asin":"B07SZFD3P9","product_title":"NaturaleBio Matcha Ceremonial Grade 100g. Original...","is_yaba_asin":"Y","click_share":2.93,"estimated_clicks":1398.68824,"average_organic_rank":23.0,"price":30.704285714,"weekly_number_of_days_with_deal":1.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":2.43,"brand_category":"My Brand"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"VAHDAM","asin":"B07MD4LB49","product_title":"VAHDAM, Matcha Gr\u00fcntee Pulver (100g, 50+ Tassen) A...","is_yaba_asin":"N","click_share":4.19,"estimated_clicks":2000.17192,"average_organic_rank":7.0,"price":9.895714286,"weekly_number_of_days_with_deal":3.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":5.29,"brand_category":"Rest of Market"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"VAHDAM","asin":"B07K1WBH4K","product_title":"VAHDAM, Vanille Matcha Gr\u00fcner Tee Pulver (100g, 50...","is_yaba_asin":"N","click_share":1.47,"estimated_clicks":701.73096,"average_organic_rank":20.0,"price":9.895714286,"weekly_number_of_days_with_deal":3.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":2.29,"brand_category":"Rest of Market"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"NORITUAL LAB","asin":"B0FSL3C3Z8","product_title":"Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...","is_yaba_asin":"N","click_share":8.42,"estimated_clicks":4019.43856,"average_organic_rank":6.0,"price":16.037142857,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.24,"brand_category":"NORITUAL LAB"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"NORITUAL LAB","asin":"B0FSL3C3Z8","product_title":"Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...","is_yaba_asin":"N","click_share":8.42,"estimated_clicks":4019.43856,"average_organic_rank":6.0,"price":16.037142857,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.24,"brand_category":"NORITUAL LAB"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"bioKontor","asin":"B08XVX8V1T","product_title":"Bio Matcha Pulver 100 g \u2013 Japan Matcha Tee, 100% n...","is_yaba_asin":"N","click_share":2.44,"estimated_clicks":1164.77792,"average_organic_rank":10.0,"price":12.367142857,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.4,"brand_category":"bioKontor"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"bioKontor","asin":"B08XVX8V1T","product_title":"Bio Matcha Pulver 100 g \u2013 Japan Matcha Tee, 100% n...","is_yaba_asin":"N","click_share":2.44,"estimated_clicks":1164.77792,"average_organic_rank":10.0,"price":12.367142857,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.4,"brand_category":"bioKontor"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"Special Leaves","asin":"B0DRP6Y6XC","product_title":"Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...","is_yaba_asin":"N","click_share":3.4,"estimated_clicks":1623.0512,"average_organic_rank":13.0,"price":10.71,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":7.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.7,"brand_category":"Special Leaves"},{"week_date":"2025-52","reporting_date":"2025-12-27","competitor_brand":"NORITUAL LAB","asin":"B0CNRX8G5S","product_title":"Ceremonial Matcha - Reines Matcha Pulver aus Japan...","is_yaba_asin":"N","click_share":18.77,"estimated_clicks":8960.19736,"average_organic_rank":2.0,"price":24.648571429,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":7.0,"impression_share":3.35,"brand_category":"NORITUAL LAB"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"Special Leaves","asin":"B0DRP6Y6XC","product_title":"Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...","is_yaba_asin":"N","click_share":3.0,"estimated_clicks":808.338,"average_organic_rank":16.0,"price":10.39,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":4.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.47,"brand_category":"Special Leaves"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"bioKontor","asin":"B08XVX8V1T","product_title":"Bio Matcha Pulver 100 g \u2013 Japan Matcha Tee, 100% n...","is_yaba_asin":"N","click_share":2.39,"estimated_clicks":643.97594,"average_organic_rank":10.0,"price":11.9975,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.91,"brand_category":"bioKontor"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"VAHDAM","asin":"B07MD4LB49","product_title":"VAHDAM, Matcha Gr\u00fcntee Pulver (100g, 50+ Tassen) A...","is_yaba_asin":"N","click_share":3.15,"estimated_clicks":848.7549,"average_organic_rank":9.0,"price":10.43,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":5.19,"brand_category":"Rest of Market"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"UNREAL\u00ae","asin":"B0F9B1LWQQ","product_title":"UNREAL\u00ae 100g Ceremonial Bio Matcha \u2013 100% Japanisc...","is_yaba_asin":"N","click_share":1.57,"estimated_clicks":423.03022,"average_organic_rank":19.0,"price":31.2725,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":1.96,"brand_category":"Rest of Market"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"NaturaleBio","asin":"B06XQ5DCYJ","product_title":"NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...","is_yaba_asin":"Y","click_share":12.9,"estimated_clicks":3475.8534,"average_organic_rank":2.0,"price":14.6075,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.37,"brand_category":"My Brand"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"NORITUAL LAB","asin":"B0CNRX8G5S","product_title":"Ceremonial Matcha - Reines Matcha Pulver aus Japan...","is_yaba_asin":"N","click_share":19.34,"estimated_clicks":5211.08564,"average_organic_rank":2.0,"price":23.91,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":4.0,"impression_share":3.36,"brand_category":"NORITUAL LAB"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"NaturaleBio","asin":"B079VQ52MK","product_title":"NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...","is_yaba_asin":"Y","click_share":3.66,"estimated_clicks":986.17236,"average_organic_rank":5.0,"price":24.5275,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.36,"brand_category":"My Brand"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"NORITUAL LAB","asin":"B0FSL3C3Z8","product_title":"Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...","is_yaba_asin":"N","click_share":7.38,"estimated_clicks":1988.51148,"average_organic_rank":6.0,"price":15.5575,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.54,"brand_category":"NORITUAL LAB"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"NaturaleBio","asin":"B06XQ69YCQ","product_title":"NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...","is_yaba_asin":"Y","click_share":3.35,"estimated_clicks":902.6441,"average_organic_rank":5.0,"price":10.2225,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.02,"brand_category":"My Brand"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"NaturaleBio","asin":"B07SZFD3P9","product_title":"NaturaleBio Matcha Ceremonial Grade 100g. Original...","is_yaba_asin":"Y","click_share":2.68,"estimated_clicks":722.11528,"average_organic_rank":null,"price":30.27,"weekly_number_of_days_with_deal":null,"weekly_number_of_days_with_coupon":null,"weekly_number_of_days_with_best_seller_badge":null,"weekly_number_of_days_with_amazon_choice_badge":null,"impression_share":2.06,"brand_category":"My Brand"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"Special Leaves","asin":"B0DRP6Y6XC","product_title":"Matcha Pulver - 90g - 100% Nat\u00fcrlich & Fein Gemahl...","is_yaba_asin":"N","click_share":3.0,"estimated_clicks":808.338,"average_organic_rank":16.0,"price":10.39,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":4.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.47,"brand_category":"Special Leaves"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"NORITUAL LAB","asin":"B0FSL3C3Z8","product_title":"Ceremonial Matcha Ryoku - Reines Gr\u00fcntee-Pulver au...","is_yaba_asin":"N","click_share":7.38,"estimated_clicks":1988.51148,"average_organic_rank":6.0,"price":15.5575,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":4.54,"brand_category":"NORITUAL LAB"},{"week_date":"2026-01","reporting_date":"2026-01-03","competitor_brand":"bioKontor","asin":"B08XVX8V1T","product_title":"Bio Matcha Pulver 100 g \u2013 Japan Matcha Tee, 100% n...","is_yaba_asin":"N","click_share":2.39,"estimated_clicks":643.97594,"average_organic_rank":10.0,"price":11.9975,"weekly_number_of_days_with_deal":0.0,"weekly_number_of_days_with_coupon":0.0,"weekly_number_of_days_with_best_seller_badge":0.0,"weekly_number_of_days_with_amazon_choice_badge":0.0,"impression_share":3.91,"brand_category":"bioKontor"}];
        
        const insightsData = {"my_brand": "NaturaleBio", "top_competitors": ["NORITUAL LAB", "Special Leaves", "bioKontor"], "current_week": "2026-01", "share_delta": 0.76, "current_share": 22.59, "top_competitor_name": "NORITUAL LAB", "top_competitor_share": 34.1};

        // --- COMPONENTS ---

        const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, AreaChart, Area, BarChart, Bar, ScatterChart, Scatter, ZAxis } = Recharts;
        const { TrendingUp, TrendingDown, AlertCircle, Award, Tag, Zap, Search } = lucide;

        const LucideIcon = ({ name, size = 18, color }) => {
            const Icon = lucide[name];
            return <Icon size={size} color={color} />;
        };

        const MetricCard = ({ title, value, subtext, trend, icon }) => (
            <div className="card p-6">
                <div className="flex justify-between items-start mb-2">
                    <p className="text-sm font-medium text-gray-500">{title}</p>
                    {icon && <LucideIcon name={icon} size={20} color="#007AFF" />}
                </div>
                <h3 className="text-2xl font-bold text-gray-900">{value}</h3>
                <div className={`flex items-center mt-2 text-sm ${trend === 'up' ? 'text-green-600' : trend === 'down' ? 'text-red-600' : 'text-gray-500'}`}>
                    {trend === 'up' && <LucideIcon name="TrendingUp" size={14} className="mr-1" />}
                    {trend === 'down' && <LucideIcon name="TrendingDown" size={14} className="mr-1" />}
                    <span>{subtext}</span>
                </div>
            </div>
        );

        const SectionHeader = ({ title, subtitle }) => (
            <div className="mb-6 mt-10">
                <h2 className="text-xl font-bold text-gray-900">{title}</h2>
                {subtitle && <p className="text-sm text-gray-500 mt-1">{subtitle}</p>}
            </div>
        );

        // --- TAB 1: STATIC REPORT ---

        const GlobalTrendSection = ({ data }) => {
            // Aggregation for chart
            const chartData = Object.values(data.reduce((acc, curr) => {
                const week = curr.week_date;
                if (!acc[week]) acc[week] = { week, MyClicks: 0, CompClicks: 0, MyShare: 0, CompShare: 0 };
                
                if (curr.is_yaba_asin === 'Y') {
                    acc[week].MyClicks += curr.estimated_clicks || 0;
                    acc[week].MyShare += curr.click_share || 0;
                } else {
                    acc[week].CompClicks += curr.estimated_clicks || 0;
                    acc[week].CompShare += curr.click_share || 0;
                }
                return acc;
            }, {})).sort((a,b) => a.week.localeCompare(b.week));

            return (
                <div className="space-y-6">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <MetricCard 
                            title="Total Click Share (Latest)" 
                            value={`${insightsData.current_share}%`} 
                            trend={insightsData.share_delta >= 0 ? 'up' : 'down'}
                            subtext={`${insightsData.share_delta > 0 ? '+' : ''}${insightsData.share_delta}% vs last week`}
                            icon="Award"
                        />
                         <MetricCard 
                            title="Top Competitor Share" 
                            value={`${insightsData.top_competitor_share}%`} 
                            subtext={`Leader: ${insightsData.top_competitor_name}`}
                            icon="AlertCircle"
                        />
                         <MetricCard 
                            title="Weeks Analyzed" 
                            value={chartData.length}
                            subtext={`From ${chartData[0]?.week} to ${chartData[chartData.length-1]?.week}`}
                            icon="Search"
                        />
                    </div>

                    <div className="card p-6">
                        <h3 className="font-semibold text-gray-900 mb-4">Click Share Evolution: Us vs. Market</h3>
                        <div className="h-72 w-full">
                            <ResponsiveContainer width="100%" height="100%">
                                <LineChart data={chartData}>
                                    <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#E5E7EB"/>
                                    <XAxis dataKey="week" axisLine={false} tickLine={false} tick={{fill: '#6B7280'}} dy={10}/>
                                    <YAxis axisLine={false} tickLine={false} tick={{fill: '#6B7280'}}/>
                                    <Tooltip contentStyle={{borderRadius:'8px', border:'none', boxShadow:'0 4px 6px rgba(0,0,0,0.1)'}}/>
                                    <Legend wrapperStyle={{paddingTop: '20px'}}/>
                                    <Line type="monotone" dataKey="MyShare" name="My Brand Share (%)" stroke="#007AFF" strokeWidth={3} dot={{r:4}} activeDot={{r:6}} />
                                    <Line type="monotone" dataKey="CompShare" name="Competitor Share (Aggregated)" stroke="#E5E7EB" strokeWidth={3} dot={{r:4}} />
                                </LineChart>
                            </ResponsiveContainer>
                        </div>
                        <p className="text-sm text-gray-500 mt-4 bg-blue-50 p-3 rounded-lg border border-blue-100">
                            <strong>Insight:</strong> Our share is trending {insightsData.share_delta >= 0 ? 'positively' : 'negatively'}. 
                            This week ({insightsData.current_week}), we hold {insightsData.current_share}% of the market, while the top competitor commands {insightsData.top_competitor_share}%.
                        </p>
                    </div>
                </div>
            );
        };

        const BrandCompSection = ({ data }) => {
            const chartData = Object.values(data.reduce((acc, curr) => {
                const week = curr.week_date;
                if (!acc[week]) acc[week] = { week };
                
                const brand = curr.brand_category;
                if (!acc[week][brand]) acc[week][brand] = 0;
                acc[week][brand] += curr.click_share;
                return acc;
            }, {})).sort((a,b) => a.week.localeCompare(b.week));

            const brands = [...new Set(data.map(d => d.brand_category))];
            const colors = {'My Brand': '#007AFF', 'NORITUAL LAB': '#FF3B30', 'Special Leaves': '#34C759', 'bioKontor': '#FF9500', 'Rest of Market': '#E5E7EB'};

            return (
                <div className="card p-6">
                     <h3 className="font-semibold text-gray-900 mb-4">Market Share Battle (Top 3 + Us)</h3>
                     <div className="h-72 w-full">
                        <ResponsiveContainer width="100%" height="100%">
                            <AreaChart data={chartData}>
                                <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#E5E7EB"/>
                                <XAxis dataKey="week" />
                                <YAxis />
                                <Tooltip />
                                <Legend />
                                {brands.map((b, i) => (
                                    <Area 
                                        key={b} 
                                        type="monotone" 
                                        dataKey={b} 
                                        stackId="1" 
                                        stroke={colors[b] || '#9CA3AF'} 
                                        fill={colors[b] || '#9CA3AF'} 
                                        fillOpacity={0.8}
                                    />
                                ))}
                            </AreaChart>
                        </ResponsiveContainer>
                    </div>
                </div>
            );
        };

        const EfficiencySection = ({ data }) => {
            // Filter to latest week for cleaner scatter
            const latestWeek = insightsData.current_week;
            const weekData = data.filter(d => d.week_date === latestWeek);

            const processedData = weekData.map(d => ({
                x: d.average_organic_rank || 50, // Rank
                y: d.click_share, // Share
                z: d.price || 0, // Size by price just for variety, or fixed
                name: d.asin,
                brand: d.brand_category,
                isMe: d.is_yaba_asin === 'Y'
            }));

            return (
                 <div className="card p-6">
                     <h3 className="font-semibold text-gray-900 mb-2">Efficiency Matrix: Rank vs. Click Share</h3>
                     <p className="text-sm text-gray-500 mb-4">Are we getting the share we deserve for our rank? (Top Left = High Efficiency)</p>
                     <div className="h-80 w-full">
                        <ResponsiveContainer width="100%" height="100%">
                            <ScatterChart margin={{top: 20, right: 20, bottom: 20, left: 20}}>
                                <CartesianGrid />
                                <XAxis type="number" dataKey="x" name="Rank" reversed={true} label={{ value: 'Organic Rank (Lower is Better)', position: 'bottom', offset: 0 }} />
                                <YAxis type="number" dataKey="y" name="Share" label={{ value: 'Click Share %', angle: -90, position: 'insideLeft' }} />
                                <Tooltip cursor={{ strokeDasharray: '3 3' }} content={({active, payload}) => {
                                    if (active && payload && payload.length) {
                                        const d = payload[0].payload;
                                        return (
                                            <div className="chart-tooltip">
                                                <p className="font-bold">{d.brand}</p>
                                                <p>ASIN: {d.name}</p>
                                                <p>Rank: {d.x}</p>
                                                <p>Share: {d.y}%</p>
                                            </div>
                                        );
                                    }
                                    return null;
                                }}/>
                                <Scatter name="My ASINs" data={processedData.filter(d => d.isMe)} fill="#007AFF" shape="circle" />
                                <Scatter name="Competitors" data={processedData.filter(d => !d.isMe)} fill="#9CA3AF" shape="triangle" />
                                <Legend />
                            </ScatterChart>
                        </ResponsiveContainer>
                    </div>
                </div>
            );
        };

        const InsightsList = () => (
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div className="card p-6 border-l-4 border-blue-500">
                    <h3 className="text-lg font-bold text-gray-900 flex items-center mb-4">
                        <LucideIcon name="Zap" className="mr-2" color="#007AFF"/> Key Insights
                    </h3>
                    <ul className="space-y-3">
                        <li className="flex items-start text-sm text-gray-700">
                            <span className="bg-blue-100 text-blue-800 text-xs font-bold px-2 py-0.5 rounded mr-2 mt-0.5">TREND</span>
                            Steady growth for {insightsData.my_brand}. Share increased to {insightsData.current_share}% in the latest week.
                        </li>
                        <li className="flex items-start text-sm text-gray-700">
                            <span className="bg-red-100 text-red-800 text-xs font-bold px-2 py-0.5 rounded mr-2 mt-0.5">THREAT</span>
                            {insightsData.top_competitor_name} dominates with ~{insightsData.top_competitor_share}% share, driven by strong rank stability.
                        </li>
                        <li className="flex items-start text-sm text-gray-700">
                            <span className="bg-green-100 text-green-800 text-xs font-bold px-2 py-0.5 rounded mr-2 mt-0.5">WINNER</span>
                            Our ASIN B06XQ5DCYJ is a top performer (Rank ~2, ~13% share), holding ground against major competitors.
                        </li>
                         <li className="flex items-start text-sm text-gray-700">
                            <span className="bg-yellow-100 text-yellow-800 text-xs font-bold px-2 py-0.5 rounded mr-2 mt-0.5">DEALS</span>
                            Drop in deal frequency for B07SZFD3P9 correlated with stagnation. Deals are a clear driver.
                        </li>
                    </ul>
                </div>
                <div className="card p-6 border-l-4 border-green-500">
                    <h3 className="text-lg font-bold text-gray-900 flex items-center mb-4">
                        <LucideIcon name="TrendingUp" className="mr-2" color="#34C759"/> Recommendations
                    </h3>
                    <ul className="space-y-3">
                        <li className="flex items-start text-sm text-gray-700">
                            <div className="min-w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-bold mr-3">1</div>
                            <span><strong>Attack Top Position:</strong> Analyze {insightsData.top_competitor_name}'s listing content. Their share is disproportionately high for their rank relative to ours.</span>
                        </li>
                        <li className="flex items-start text-sm text-gray-700">
                            <div className="min-w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-bold mr-3">2</div>
                            <span><strong>Reactivate Promotions:</strong> Restore Deal frequency for B07SZFD3P9 to regain the momentum seen in Week 51.</span>
                        </li>
                        <li className="flex items-start text-sm text-gray-700">
                            <div className="min-w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs font-bold mr-3">3</div>
                            <span><strong>Inventory Defense:</strong> Protect stock levels for B06XQ5DCYJ. It is the efficiency anchor of the parent.</span>
                        </li>
                    </ul>
                </div>
            </div>
        );

        // --- TAB 2: INTERACTIVE COMPARE ---

        const InteractiveSection = ({ data }) => {
            const weeks = [...new Set(data.map(d => d.week_date))];
            const competitors = [...new Set(data.filter(d => d.is_yaba_asin === 'N').map(d => d.competitor_brand))];
            
            const [selectedWeek, setSelectedWeek] = React.useState(weeks[weeks.length - 1]);
            const [selectedComp, setSelectedComp] = React.useState(competitors[0] || '');

            // Filter Data
            const myData = data.filter(d => d.week_date === selectedWeek && d.is_yaba_asin === 'Y');
            const compData = data.filter(d => d.week_date === selectedWeek && d.competitor_brand === selectedComp);

            // Calculate avgs
            const getAvg = (ds, key) => {
                if (!ds.length) return 0;
                return (ds.reduce((acc, curr) => acc + (curr[key] || 0), 0) / ds.length).toFixed(2);
            };

            return (
                <div className="space-y-6">
                    {/* Controls */}
                    <div className="flex flex-wrap gap-4 bg-white p-4 rounded-xl border border-gray-200">
                        <div>
                            <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Week</label>
                            <select 
                                className="block w-40 p-2 text-sm border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 bg-gray-50"
                                value={selectedWeek}
                                onChange={(e) => setSelectedWeek(e.target.value)}
                            >
                                {weeks.map(w => <option key={w} value={w}>{w}</option>)}
                            </select>
                        </div>
                        <div>
                            <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Competitor</label>
                            <select 
                                className="block w-40 p-2 text-sm border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 bg-gray-50"
                                value={selectedComp}
                                onChange={(e) => setSelectedComp(e.target.value)}
                            >
                                {competitors.map(c => <option key={c} value={c}>{c}</option>)}
                            </select>
                        </div>
                    </div>

                    {/* Head to Head Cards */}
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div className="card p-4 text-center">
                            <p className="text-xs text-gray-500">Avg Price (Us)</p>
                            <p className="text-xl font-bold text-blue-600">€{getAvg(myData, 'price')}</p>
                        </div>
                        <div className="card p-4 text-center">
                            <p className="text-xs text-gray-500">Avg Price (Them)</p>
                            <p className="text-xl font-bold text-red-500">€{getAvg(compData, 'price')}</p>
                        </div>
                         <div className="card p-4 text-center">
                            <p className="text-xs text-gray-500">Share (Us)</p>
                            <p className="text-xl font-bold text-blue-600">{myData.reduce((a,b)=>a+b.click_share,0).toFixed(2)}%</p>
                        </div>
                        <div className="card p-4 text-center">
                            <p className="text-xs text-gray-500">Share (Them)</p>
                            <p className="text-xl font-bold text-red-500">{compData.reduce((a,b)=>a+b.click_share,0).toFixed(2)}%</p>
                        </div>
                    </div>

                    {/* Detailed List */}
                    <div className="card overflow-hidden">
                        <table className="min-w-full divide-y divide-gray-200">
                            <thead className="bg-gray-50">
                                <tr>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Product</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rank</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Share</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Active Promo</th>
                                </tr>
                            </thead>
                            <tbody className="bg-white divide-y divide-gray-200">
                                {[...myData, ...compData].map((item, idx) => (
                                    <tr key={idx} className={item.is_yaba_asin === 'Y' ? 'bg-blue-50' : ''}>
                                        <td className="px-6 py-4">
                                            <div className="text-sm font-medium text-gray-900 truncate w-64" title={item.product_title}>{item.product_title}</div>
                                            <div className="text-xs text-gray-500">{item.competitor_brand}</div>
                                        </td>
                                        <td className="px-6 py-4 text-sm text-gray-500">{item.average_organic_rank || '-'}</td>
                                        <td className="px-6 py-4 text-sm text-gray-500 font-bold">{item.click_share}%</td>
                                        <td className="px-6 py-4">
                                            <div className="flex space-x-2">
                                                {item.weekly_number_of_days_with_deal > 0 && <span className="bg-red-100 text-red-800 text-xs px-2 py-1 rounded">Deal</span>}
                                                {item.weekly_number_of_days_with_coupon > 0 && <span className="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Coupon</span>}
                                            </div>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };

        // --- MAIN APP ---

        const Dashboard = () => {
            const [activeTab, setActiveTab] = React.useState('report');

            return (
                <div className="max-w-7xl mx-auto">
                    {/* Header */}
                    <div className="flex flex-col md:flex-row md:items-center justify-between mb-8">
                        <div>
                            <h1 className="text-3xl font-bold text-gray-900">Market Intelligence: {insightsData.my_brand}</h1>
                            <p className="text-gray-500 mt-1">Parent ASIN Performance Report • Last updated {insightsData.current_week}</p>
                        </div>
                        <div className="flex mt-4 md:mt-0 bg-gray-200 p-1 rounded-xl">
                            <button 
                                onClick={() => setActiveTab('report')}
                                className={`px-4 py-2 text-sm font-medium rounded-lg transition-all ${activeTab === 'report' ? 'tab-active' : 'tab-inactive'}`}
                            >
                                Static Report
                            </button>
                            <button 
                                onClick={() => setActiveTab('compare')}
                                className={`px-4 py-2 text-sm font-medium rounded-lg transition-all ${activeTab === 'compare' ? 'tab-active' : 'tab-inactive'}`}
                            >
                                Interactive Compare
                            </button>
                        </div>
                    </div>

                    {/* Content */}
                    {activeTab === 'report' ? (
                        <div className="animate-fade-in space-y-8">
                            <SectionHeader title="1. Global Trend & Performance" subtitle="How is our Parent ASIN performing vs the market aggregate?" />
                            <GlobalTrendSection data={marketData} />

                            <SectionHeader title="2. Brand Competitiveness" subtitle="Who is winning the Click Share battle?" />
                            <BrandCompSection data={marketData} />

                            <SectionHeader title="3. Efficiency Analysis" subtitle="Organic Rank vs. Actual Click Share" />
                            <EfficiencySection data={marketData} />

                            <SectionHeader title="4. Conclusions & Actions" subtitle="Strategic takeaways based on the data" />
                            <InsightsList />
                        </div>
                    ) : (
                        <div className="animate-fade-in">
                            <SectionHeader title="Deep Dive Comparison" subtitle="Select a week and a competitor to analyze head-to-head metrics." />
                            <InteractiveSection data={marketData} />
                        </div>
                    )}
                    
                    <div className="mt-12 border-t border-gray-200 pt-6 text-center text-xs text-gray-400">
                        Generated automatically by Amazon Market Intelligence Tool
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<Dashboard />);
    </script>
</body>
</html>