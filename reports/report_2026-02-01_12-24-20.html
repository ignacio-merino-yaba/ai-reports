<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Market Intelligence Report</title>
    <!-- Google Charts -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #4285F4;
            --secondary-color: #EA4335;
            --neutral-bg: #F5F5F7;
            --card-bg: #FFFFFF;
            --text-main: #1D1D1F;
            --text-secondary: #86868B;
            --border-radius: 16px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--neutral-bg);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            line-height: 1.5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        header {
            background: var(--card-bg);
            padding: 24px;
            border-radius: var(--border-radius);
            margin-bottom: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 { margin: 0; font-size: 24px; font-weight: 600; }
        .subtitle { color: var(--text-secondary); font-size: 14px; margin-top: 4px; }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }

        .tab-btn {
            background: rgba(255,255,255,0.5);
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-secondary);
        }

        .tab-btn.active {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 2px 8px rgba(66, 133, 244, 0.3);
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.04);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title { font-size: 18px; font-weight: 600; }

        /* Grid Layouts */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 24px; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }

        /* Metrics */
        .metric-box {
            background: var(--neutral-bg);
            padding: 16px;
            border-radius: 12px;
            text-align: center;
        }
        .metric-val { font-size: 24px; font-weight: 700; color: var(--primary-color); }
        .metric-label { font-size: 12px; color: var(--text-secondary); margin-top: 4px; }
        .metric-sub { font-size: 12px; font-weight: 500; margin-top: 4px; }
        .pos { color: #34A853; }
        .neg { color: #EA4335; }

        /* Insights List */
        .insight-item {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            align-items: flex-start;
        }
        .insight-icon { color: var(--primary-color); }
        
        /* Interactive Controls */
        .controls {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
        }
        select {
            padding: 10px 16px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 14px;
            min-width: 200px;
            background: white;
        }

        /* H2H Comparator */
        .h2h-container {
            display: flex;
            align-items: stretch;
            gap: 24px;
        }
        .h2h-side {
            flex: 1;
            padding: 20px;
            border-radius: 16px;
            text-align: center;
        }
        .h2h-us { background: #E8F0FE; color: #1967D2; }
        .h2h-them { background: #FCE8E6; color: #C5221F; }
        .h2h-vs { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: 900; 
            color: #ddd; 
            font-size: 24px;
        }
        .big-stat { font-size: 32px; font-weight: 700; margin: 10px 0; }

        /* Utility */
        .hidden { display: none; }
        .chart-container { width: 100%; height: 400px; }
        
        /* Mobile */
        @media (max-width: 768px) {
            .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
            .h2h-container { flex-direction: column; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div>
            <h1>Market Intelligence Report</h1>
            <div class="subtitle" id="reportDate">Report Generated: Today</div>
        </div>
        <div style="text-align: right;">
            <div style="font-weight: 600;" id="ourBrandName">Loading...</div>
            <div style="font-size: 12px; color: #666;">Target Parent ASIN</div>
        </div>
    </header>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('static')">1. Analysis Dashboard</button>
        <button class="tab-btn" onclick="switchTab('interactive')">2. Competitive Simulator</button>
    </div>

    <!-- TAB 1: STATIC DASHBOARD -->
    <div id="tab-static">
        
        <!-- Section 1: Global Trend -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">1. Global Parent Trend (Last 5 Weeks)</div>
            </div>
            <div class="grid-4" style="margin-bottom: 20px;">
                <div class="metric-box">
                    <div class="metric-val" id="metric-clicks">0</div>
                    <div class="metric-label">Total Clicks (Last Wk)</div>
                </div>
                <div class="metric-box">
                    <div class="metric-val" id="metric-share">0%</div>
                    <div class="metric-label">Our Click Share</div>
                </div>
                 <div class="metric-box">
                    <div class="metric-val" id="metric-growth">0%</div>
                    <div class="metric-label">WoW Growth</div>
                </div>
                <div class="metric-box">
                    <div class="metric-val" id="metric-rank">0</div>
                    <div class="metric-label">Avg Organic Rank</div>
                </div>
            </div>
            <div id="chart_global_trend" class="chart-container"></div>
            <div style="margin-top:15px; font-size: 13px; color: #666;">
                *Bars represent Volume (Clicks), Lines represent Market Share (%).
            </div>
        </div>

        <!-- Section 2: Brand Competitiveness -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">2. Brand Competitiveness (Click Share Evolution)</div>
            </div>
            <div id="chart_brand_comp" class="chart-container"></div>
            <div style="margin-top: 10px; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                <strong>Market Context:</strong> <span id="market-context-text">Loading insights...</span>
            </div>
        </div>

        <div class="grid-2">
            <!-- Section 3: Levers -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">3. üöÄ Growth Levers Analysis</div>
                </div>
                <div id="levers-container">
                    <!-- Dynamic levers will be injected here -->
                </div>
            </div>

            <!-- Section 4: Efficiency -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">4. üëÅÔ∏è Efficiency: Rank vs Share</div>
                </div>
                <div id="chart_efficiency" class="chart-container" style="height: 300px;"></div>
                <p style="font-size: 12px; color: #666; text-align: center; margin-top: 5px;">
                    Y-Axis: Click Share | X-Axis: Organic Rank (Lower is better) | Size: Price
                </p>
            </div>
        </div>

        <!-- Section 5: Recommendations -->
        <div class="card" style="border-left: 5px solid var(--primary-color);">
            <div class="card-header">
                <div class="card-title">5. üí° Key Insights & Actionable Recommendations</div>
            </div>
            <div id="insights-container">
                <!-- Dynamic insights -->
            </div>
            <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">
            <div style="font-weight: 600; margin-bottom: 12px;">Recommended Actions:</div>
            <div id="actions-container" style="display: grid; gap: 10px;">
                <!-- Dynamic actions -->
            </div>
        </div>
    </div>

    <!-- TAB 2: INTERACTIVE COMPARATOR -->
    <div id="tab-interactive" class="hidden">
        <div class="card">
            <div class="card-header">
                <div class="card-title">Head-to-Head Comparator</div>
            </div>
            
            <div class="controls">
                <div>
                    <label style="display:block; font-size:12px; margin-bottom:4px; color:#666;">Select Week</label>
                    <select id="sel-week" onchange="updateComparator()"></select>
                </div>
                <div>
                    <label style="display:block; font-size:12px; margin-bottom:4px; color:#666;">Select Competitor</label>
                    <select id="sel-comp" onchange="updateComparator()"></select>
                </div>
            </div>

            <div class="h2h-container">
                <div class="h2h-side h2h-us">
                    <div style="text-transform: uppercase; font-size: 12px; font-weight: 700; letter-spacing: 1px;">US (<span id="comp-us-name"></span>)</div>
                    <div class="big-stat" id="comp-us-share">0%</div>
                    <div>Click Share</div>
                    <hr style="border-top: 1px solid rgba(0,0,0,0.1); margin: 15px 0;">
                    <div style="font-size: 14px;">Avg Price: <strong id="comp-us-price">$0</strong></div>
                    <div style="font-size: 14px;">Avg Rank: <strong id="comp-us-rank">0</strong></div>
                    <div style="margin-top: 10px;" id="comp-us-badges"></div>
                </div>

                <div class="h2h-vs">VS</div>

                <div class="h2h-side h2h-them">
                    <div style="text-transform: uppercase; font-size: 12px; font-weight: 700; letter-spacing: 1px;">THEM (<span id="comp-them-name"></span>)</div>
                    <div class="big-stat" id="comp-them-share">0%</div>
                    <div>Click Share</div>
                    <hr style="border-top: 1px solid rgba(0,0,0,0.1); margin: 15px 0;">
                    <div style="font-size: 14px;">Avg Price: <strong id="comp-them-price">$0</strong></div>
                    <div style="font-size: 14px;">Avg Rank: <strong id="comp-them-rank">0</strong></div>
                    <div style="margin-top: 10px;" id="comp-them-badges"></div>
                </div>
            </div>
            
            <div style="margin-top: 24px;">
                <div style="font-weight: 600; margin-bottom: 10px;">Why are they winning/losing?</div>
                <ul id="comp-analysis-text" style="color: #444; font-size: 14px; padding-left: 20px;"></ul>
            </div>
        </div>
    </div>

</div>

<script>
    // ------------------------------------------------------------------
    // 1. DATA INJECTION (Synthesized Data from Python Step)
    // ------------------------------------------------------------------
    const marketData = [{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":"YabaTech","asin":"YAB843","product_title":"YabaTech Widget Pro YAB843","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":29.77,"organic_rank":5,"average_organic_rank":5,"click_share":10.2120935491,"is_yaba_asin":"Y","weekly_search_volume":10000,"clicks":408.4837419632,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":"YabaTech","asin":"YAB561","product_title":"YabaTech Widget Pro YAB561","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":29.85,"organic_rank":4,"average_organic_rank":4,"click_share":12.7651169363,"is_yaba_asin":"Y","weekly_search_volume":10000,"clicks":510.604677454,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":"AlphaBrand","asin":"ALP985","product_title":"AlphaBrand Widget Pro ALP985","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":7,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":35.52,"organic_rank":2,"average_organic_rank":2,"click_share":25.5302338727,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":1021.2093549079,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":"AlphaBrand","asin":"ALP392","product_title":"AlphaBrand Widget Pro ALP392","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":7,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":35.5,"organic_rank":3,"average_organic_rank":3,"click_share":17.0201559151,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":680.8062366053,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":"BetaCorp","asin":"BET450","product_title":"BetaCorp Widget Pro BET450","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":25.19,"organic_rank":7,"average_organic_rank":7,"click_share":7.2943525351,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":291.7741014023,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":"BetaCorp","asin":"BET191","product_title":"BetaCorp Widget Pro BET191","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":24.5,"organic_rank":7,"average_organic_rank":7,"click_share":7.2943525351,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":291.7741014023,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":"GammaGoods","asin":"GAM125","product_title":"GammaGoods Widget Pro GAM125","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":33.85,"organic_rank":10,"average_organic_rank":10,"click_share":5.1060467745,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":204.2418709816,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":"GammaGoods","asin":"GAM921","product_title":"GammaGoods Widget Pro GAM921","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":33.57,"organic_rank":13,"average_organic_rank":13,"click_share":3.9277282881,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":157.1091315243,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":null,"asin":"UNK695","product_title":"Generic Widget Pro UNK695","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":20.9,"organic_rank":25,"average_organic_rank":25,"click_share":2.0424187098,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":81.6967483926,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":null,"asin":"UNK643","product_title":"Generic Widget Pro UNK643","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.54,"organic_rank":27,"average_organic_rank":27,"click_share":1.891128435,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":75.6451374006,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":null,"asin":"UNK161","product_title":"Generic Widget Pro UNK161","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.43,"organic_rank":20,"average_organic_rank":20,"click_share":2.5530233873,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":102.1209354908,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":null,"asin":"UNK983","product_title":"Generic Widget Pro UNK983","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.01,"organic_rank":22,"average_organic_rank":22,"click_share":2.3209303521,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":92.8372140825,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-01","competitor_brand":null,"asin":"UNK685","product_title":"Generic Widget Pro UNK685","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.25,"organic_rank":25,"average_organic_rank":25,"click_share":2.0424187098,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":81.6967483926,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":"YabaTech","asin":"YAB826","product_title":"YabaTech Widget Pro YAB826","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":28.84,"organic_rank":5,"average_organic_rank":5,"click_share":10.6344352259,"is_yaba_asin":"Y","weekly_search_volume":10000,"clicks":425.3774090349,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":"YabaTech","asin":"YAB468","product_title":"YabaTech Widget Pro YAB468","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":29.62,"organic_rank":5,"average_organic_rank":5,"click_share":10.6344352259,"is_yaba_asin":"Y","weekly_search_volume":10000,"clicks":425.3774090349,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":"AlphaBrand","asin":"ALP902","product_title":"AlphaBrand Widget Pro ALP902","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":7,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":34.91,"organic_rank":2,"average_organic_rank":2,"click_share":26.5860880647,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":1063.4435225872,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":"AlphaBrand","asin":"ALP510","product_title":"AlphaBrand Widget Pro ALP510","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":7,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":36.47,"organic_rank":3,"average_organic_rank":3,"click_share":17.7240587098,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":708.9623483915,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":"BetaCorp","asin":"BET415","product_title":"BetaCorp Widget Pro BET415","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":25.53,"organic_rank":9,"average_organic_rank":9,"click_share":5.9080195699,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":236.3207827972,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":"BetaCorp","asin":"BET177","product_title":"BetaCorp Widget Pro BET177","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":25.92,"organic_rank":7,"average_organic_rank":7,"click_share":7.5960251613,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":303.8410064535,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":"GammaGoods","asin":"GAM451","product_title":"GammaGoods Widget Pro GAM451","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":31.02,"organic_rank":11,"average_organic_rank":11,"click_share":4.8338341936,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":193.3533677431,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":"GammaGoods","asin":"GAM866","product_title":"GammaGoods Widget Pro GAM866","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":33.04,"organic_rank":10,"average_organic_rank":10,"click_share":5.3172176129,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":212.6887045174,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":null,"asin":"UNK809","product_title":"Generic Widget Pro UNK809","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":20.07,"organic_rank":24,"average_organic_rank":24,"click_share":2.2155073387,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":88.6202935489,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":null,"asin":"UNK697","product_title":"Generic Widget Pro UNK697","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.08,"organic_rank":27,"average_organic_rank":27,"click_share":1.9693398566,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":78.7735942657,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":null,"asin":"UNK821","product_title":"Generic Widget Pro UNK821","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.68,"organic_rank":21,"average_organic_rank":21,"click_share":2.5320083871,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":101.2803354845,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":null,"asin":"UNK141","product_title":"Generic Widget Pro UNK141","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.57,"organic_rank":24,"average_organic_rank":24,"click_share":2.2155073387,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":88.6202935489,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-08","competitor_brand":null,"asin":"UNK583","product_title":"Generic Widget Pro UNK583","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":20.3,"organic_rank":29,"average_organic_rank":29,"click_share":1.8335233148,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":73.3409325922,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":"YabaTech","asin":"YAB437","product_title":"YabaTech Widget Pro YAB437","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":29.42,"organic_rank":5,"average_organic_rank":5,"click_share":10.4596992745,"is_yaba_asin":"Y","weekly_search_volume":10000,"clicks":418.3879709782,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":"YabaTech","asin":"YAB500","product_title":"YabaTech Widget Pro YAB500","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":30.99,"organic_rank":4,"average_organic_rank":4,"click_share":13.0746240931,"is_yaba_asin":"Y","weekly_search_volume":10000,"clicks":522.9849637227,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":"AlphaBrand","asin":"ALP504","product_title":"AlphaBrand Widget Pro ALP504","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":36.67,"organic_rank":3,"average_organic_rank":3,"click_share":17.4328321241,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":697.3132849636,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":"AlphaBrand","asin":"ALP868","product_title":"AlphaBrand Widget Pro ALP868","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":33.29,"organic_rank":2,"average_organic_rank":2,"click_share":26.1492481861,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":1045.9699274454,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":"BetaCorp","asin":"BET981","product_title":"BetaCorp Widget Pro BET981","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":24.33,"organic_rank":9,"average_organic_rank":9,"click_share":5.8109440414,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":232.4377616545,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":"BetaCorp","asin":"BET349","product_title":"BetaCorp Widget Pro BET349","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":25.99,"organic_rank":7,"average_organic_rank":7,"click_share":7.4712137675,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":298.8485506987,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":"GammaGoods","asin":"GAM725","product_title":"GammaGoods Widget Pro GAM725","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":33.94,"organic_rank":13,"average_organic_rank":13,"click_share":4.0229612594,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":160.9184503762,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":"GammaGoods","asin":"GAM651","product_title":"GammaGoods Widget Pro GAM651","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":31.19,"organic_rank":10,"average_organic_rank":10,"click_share":5.2298496372,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":209.1939854891,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":null,"asin":"UNK978","product_title":"Generic Widget Pro UNK978","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":20.41,"organic_rank":22,"average_organic_rank":22,"click_share":2.3772043806,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":95.0881752223,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":null,"asin":"UNK931","product_title":"Generic Widget Pro UNK931","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.41,"organic_rank":27,"average_organic_rank":27,"click_share":1.9369813471,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":77.4792538848,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":null,"asin":"UNK393","product_title":"Generic Widget Pro UNK393","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.08,"organic_rank":26,"average_organic_rank":26,"click_share":2.0114806297,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":80.4592251881,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":null,"asin":"UNK707","product_title":"Generic Widget Pro UNK707","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.06,"organic_rank":26,"average_organic_rank":26,"click_share":2.0114806297,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":80.4592251881,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-15","competitor_brand":null,"asin":"UNK268","product_title":"Generic Widget Pro UNK268","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.82,"organic_rank":26,"average_organic_rank":26,"click_share":2.0114806297,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":80.4592251881,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":"YabaTech","asin":"YAB726","product_title":"YabaTech Widget Pro YAB726","weekly_number_of_days_with_deal":7,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":25.49,"organic_rank":3,"average_organic_rank":3,"click_share":19.1070158315,"is_yaba_asin":"Y","weekly_search_volume":10000,"clicks":764.2806332611,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":"YabaTech","asin":"YAB468","product_title":"YabaTech Widget Pro YAB468","weekly_number_of_days_with_deal":7,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":25.49,"organic_rank":3,"average_organic_rank":3,"click_share":19.1070158315,"is_yaba_asin":"Y","weekly_search_volume":10000,"clicks":764.2806332611,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":"AlphaBrand","asin":"ALP310","product_title":"AlphaBrand Widget Pro ALP310","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":34.3,"organic_rank":2,"average_organic_rank":2,"click_share":19.1070158315,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":764.2806332611,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":"AlphaBrand","asin":"ALP954","product_title":"AlphaBrand Widget Pro ALP954","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":33.29,"organic_rank":2,"average_organic_rank":2,"click_share":19.1070158315,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":764.2806332611,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":"BetaCorp","asin":"BET446","product_title":"BetaCorp Widget Pro BET446","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":25.32,"organic_rank":8,"average_organic_rank":8,"click_share":4.7767539579,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":191.0701583153,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":"BetaCorp","asin":"BET377","product_title":"BetaCorp Widget Pro BET377","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":25.85,"organic_rank":8,"average_organic_rank":8,"click_share":4.7767539579,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":191.0701583153,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":"GammaGoods","asin":"GAM746","product_title":"GammaGoods Widget Pro GAM746","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":31.31,"organic_rank":12,"average_organic_rank":12,"click_share":3.1845026386,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":127.3801055435,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":"GammaGoods","asin":"GAM577","product_title":"GammaGoods Widget Pro GAM577","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":33.0,"organic_rank":11,"average_organic_rank":11,"click_share":3.4740028785,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":138.9601151384,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":null,"asin":"UNK828","product_title":"Generic Widget Pro UNK828","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.37,"organic_rank":25,"average_organic_rank":25,"click_share":1.5285612665,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":61.1424506609,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":null,"asin":"UNK911","product_title":"Generic Widget Pro UNK911","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.91,"organic_rank":28,"average_organic_rank":28,"click_share":1.3647868451,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":54.5914738044,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":null,"asin":"UNK936","product_title":"Generic Widget Pro UNK936","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":20.23,"organic_rank":28,"average_organic_rank":28,"click_share":1.3647868451,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":54.5914738044,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":null,"asin":"UNK220","product_title":"Generic Widget Pro UNK220","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":20.39,"organic_rank":28,"average_organic_rank":28,"click_share":1.3647868451,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":54.5914738044,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-22","competitor_brand":null,"asin":"UNK544","product_title":"Generic Widget Pro UNK544","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.01,"organic_rank":22,"average_organic_rank":22,"click_share":1.7370014392,"is_yaba_asin":"N","weekly_search_volume":10000,"clicks":69.4800575692,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":"YabaTech","asin":"YAB633","product_title":"YabaTech Widget Pro YAB633","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":30.3,"organic_rank":4,"average_organic_rank":4,"click_share":11.4321071331,"is_yaba_asin":"Y","weekly_search_volume":11000,"clicks":503.0127138583,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":"YabaTech","asin":"YAB630","product_title":"YabaTech Widget Pro YAB630","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":29.88,"organic_rank":4,"average_organic_rank":4,"click_share":11.4321071331,"is_yaba_asin":"Y","weekly_search_volume":11000,"clicks":503.0127138583,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":"AlphaBrand","asin":"ALP637","product_title":"AlphaBrand Widget Pro ALP637","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":35.21,"organic_rank":2,"average_organic_rank":2,"click_share":22.8642142663,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":1006.0254277167,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":"AlphaBrand","asin":"ALP196","product_title":"AlphaBrand Widget Pro ALP196","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":36.56,"organic_rank":2,"average_organic_rank":2,"click_share":22.8642142663,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":1006.0254277167,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":"BetaCorp","asin":"BET331","product_title":"BetaCorp Widget Pro BET331","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":26.07,"organic_rank":7,"average_organic_rank":7,"click_share":6.5326326475,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":287.4358364905,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":"BetaCorp","asin":"BET438","product_title":"BetaCorp Widget Pro BET438","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":25.09,"organic_rank":7,"average_organic_rank":7,"click_share":6.5326326475,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":287.4358364905,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":"GammaGoods","asin":"GAM756","product_title":"GammaGoods Widget Pro GAM756","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":33.91,"organic_rank":12,"average_organic_rank":12,"click_share":3.8107023777,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":167.6709046194,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":"GammaGoods","asin":"GAM729","product_title":"GammaGoods Widget Pro GAM729","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":34.12,"organic_rank":9,"average_organic_rank":9,"click_share":5.0809365036,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":223.5612061593,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":null,"asin":"UNK298","product_title":"Generic Widget Pro UNK298","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.97,"organic_rank":23,"average_organic_rank":23,"click_share":1.9881925449,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":87.4804719754,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":null,"asin":"UNK363","product_title":"Generic Widget Pro UNK363","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":20.59,"organic_rank":27,"average_organic_rank":27,"click_share":1.6936455012,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":74.5204020531,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":null,"asin":"UNK744","product_title":"Generic Widget Pro UNK744","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":20.28,"organic_rank":29,"average_organic_rank":29,"click_share":1.5768423632,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":69.3810639805,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":null,"asin":"UNK691","product_title":"Generic Widget Pro UNK691","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.1,"organic_rank":24,"average_organic_rank":24,"click_share":1.9053511889,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":83.8354523097,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"},{"brand_aggregation":"TargetParent","parent_asin":"PARENT123","week_date":"2023-10-29","competitor_brand":null,"asin":"UNK662","product_title":"Generic Widget Pro UNK662","weekly_number_of_days_with_deal":0,"weekly_number_of_days_with_best_seller_badge":0,"weekly_number_of_days_with_amazon_choice_badge":0,"weekly_number_of_days_with_coupon":0,"price":19.82,"organic_rank":20,"average_organic_rank":20,"click_share":2.2864214266,"is_yaba_asin":"N","weekly_search_volume":11000,"clicks":100.6025427717,"keyword":"widget for home","keywords_link":"http:\/\/amazon...\/k=widget","grams":500,"organic_or_not":"Organic","container":"Box"}];

    // ------------------------------------------------------------------
    // 2. DATA PROCESSING LOGIC
    // ------------------------------------------------------------------
    
    // Globals
    let processedData = [];
    let ourBrand = "";
    let weekList = [];
    let competitorList = [];
    
    function init() {
        processData();
        renderHeader();
        updateInsights();
        setupInteractiveControls();
        
        // Load Google Charts
        google.charts.load('current', {'packages':['corechart', 'bar', 'line']});
        google.charts.setOnLoadCallback(drawCharts);
    }

    function processData() {
        // 2.1 Brand Identification & Cleanup
        processedData = marketData.map(row => {
            let brand = row.competitor_brand;
            
            // Fallback for null brand
            if (!brand) {
                // Try to extract from title
                const titleParts = row.product_title.split(' ');
                brand = titleParts[0] || "Unknown Brand";
            }
            
            return {
                ...row,
                real_brand: brand
            };
        });

        // 2.2 Identify Our Brand
        const ourAsinRow = processedData.find(r => r.is_yaba_asin === 'Y');
        ourBrand = ourAsinRow ? ourAsinRow.real_brand : "Unknown";

        // 2.3 Unique Weeks
        weekList = [...new Set(processedData.map(r => r.week_date))].sort();

        // 2.4 Identify Top Competitors (by total clicks)
        const brandClicks = {};
        processedData.forEach(r => {
            if (r.real_brand !== ourBrand) {
                brandClicks[r.real_brand] = (brandClicks[r.real_brand] || 0) + r.clicks;
            }
        });
        
        competitorList = Object.entries(brandClicks)
            .sort((a,b) => b[1] - a[1])
            .map(e => e[0]);
    }

    function renderHeader() {
        document.getElementById('reportDate').innerText = "Report Date: " + new Date().toLocaleDateString();
        document.getElementById('ourBrandName').innerText = ourBrand;
    }

    // ------------------------------------------------------------------
    // 3. CHART RENDERING
    // ------------------------------------------------------------------
    function drawCharts() {
        drawGlobalTrend();
        drawBrandCompetitiveness();
        drawEfficiencyChart();
    }

    function drawGlobalTrend() {
        // Aggregation: Week -> {Our Clicks, Comp Clicks, Our Share, Comp Share}
        const chartData = [['Week', 'Our Clicks', 'Comp Clicks', 'Our Share (%)', 'Comp Share (%)']];
        
        weekList.forEach(week => {
            const weekRows = processedData.filter(r => r.week_date === week);
            const ourRows = weekRows.filter(r => r.is_yaba_asin === 'Y');
            const compRows = weekRows.filter(r => r.is_yaba_asin === 'N');

            const ourClicks = ourRows.reduce((sum, r) => sum + r.clicks, 0);
            const compClicks = compRows.reduce((sum, r) => sum + r.clicks, 0);
            
            const totalScore = weekRows.reduce((sum, r) => sum + r.click_share, 0); // Re-sum share to norm
            const ourShare = ourRows.reduce((sum, r) => sum + r.click_share, 0);
            const compShare = 100 - ourShare; // Simplified for visual

            chartData.push([week.substring(5), ourClicks, compClicks, ourShare, compShare]);
        });

        const data = google.visualization.arrayToDataTable(chartData);
        const options = {
            seriesType: 'bars',
            series: {2: {type: 'line', targetAxisIndex: 1}, 3: {type: 'line', targetAxisIndex: 1}},
            vAxes: {0: {title: 'Clicks'}, 1: {title: 'Share %', format: '#\'%\''}},
            colors: ['#4285F4', '#EA4335', '#1967D2', '#C5221F'],
            legend: {position: 'bottom'},
            chartArea: {width: '85%', height: '70%'},
            bar: {groupWidth: '60%'}
        };

        const chart = new google.visualization.ComboChart(document.getElementById('chart_global_trend'));
        chart.draw(data, options);
        
        // Update Static Metrics (Last Week)
        const lastRow = chartData[chartData.length-1];
        const prevRow = chartData[chartData.length-2];
        const totalLastClicks = lastRow[1] + lastRow[2];
        
        document.getElementById('metric-clicks').innerText = Math.round(totalLastClicks).toLocaleString();
        document.getElementById('metric-share').innerText = lastRow[3].toFixed(1) + "%";
        
        // Growth calc
        const ourClicksLast = lastRow[1];
        const ourClicksPrev = prevRow[1];
        const growth = ((ourClicksLast - ourClicksPrev) / ourClicksPrev) * 100;
        const growthElem = document.getElementById('metric-growth');
        growthElem.innerText = (growth > 0 ? "+" : "") + growth.toFixed(1) + "%";
        growthElem.className = "metric-val " + (growth >= 0 ? "pos" : "neg");

        // Rank Metric
        const lastWeekRows = processedData.filter(r => r.week_date === weekList[weekList.length-1] && r.is_yaba_asin === 'Y');
        const avgRank = lastWeekRows.reduce((sum, r) => sum + r.organic_rank, 0) / lastWeekRows.length;
        document.getElementById('metric-rank').innerText = avgRank.toFixed(1);
    }

    function drawBrandCompetitiveness() {
        // Columns: Week, Us, Comp1, Comp2, Comp3, Others
        const top3 = competitorList.slice(0, 3);
        const header = ['Week', ourBrand, ...top3, 'Others'];
        const rows = [];

        weekList.forEach(week => {
            const weekRows = processedData.filter(r => r.week_date === week);
            const totalShare = weekRows.reduce((s,r) => s + r.click_share, 0);
            
            const getShare = (brand) => {
                const bRows = weekRows.filter(r => r.real_brand === brand);
                return bRows.reduce((s,r) => s + r.click_share, 0);
            };

            const row = [week.substring(5)];
            row.push(getShare(ourBrand));
            
            let othersShare = 0;
            const knownShare = row[1]; // our share
            let compSum = 0;

            top3.forEach(c => {
                const s = getShare(c);
                row.push(s);
                compSum += s;
            });

            othersShare = 100 - (knownShare + compSum); // Residual
            row.push(othersShare > 0 ? othersShare : 0);
            
            rows.push(row);
        });

        const data = google.visualization.arrayToDataTable([header, ...rows]);
        const options = {
            curveType: 'function',
            legend: { position: 'bottom' },
            chartArea: {width: '90%', height: '70%'},
            vAxis: {title: 'Click Share (%)'},
            lineWidth: 3,
            series: {
                0: { color: '#4285F4' }, // Us
                4: { color: '#999', lineDashStyle: [4, 4], lineWidth: 2 } // Others
            }
        };

        const chart = new google.visualization.LineChart(document.getElementById('chart_brand_comp'));
        chart.draw(data, options);
        
        document.getElementById('market-context-text').innerText = 
            `Comparing ${ourBrand} against top rivals: ${top3.join(', ')}.`;
    }

    function drawEfficiencyChart() {
        // Last Week Only
        const lastWeek = weekList[weekList.length - 1];
        const dataRows = processedData.filter(r => r.week_date === lastWeek);
        
        // [Rank, Share, Color (Brand), Size (Price)]
        const chartData = [['Organic Rank', 'Click Share', {'type': 'string', 'role': 'style'}, 'Price']];
        
        dataRows.forEach(r => {
            const color = r.is_yaba_asin === 'Y' ? '#4285F4' : '#EA4335';
            // Size needs to be number for bubble, but scatter uses style point.
            // Using bubble logic manually or Scatter
            chartData.push([r.organic_rank, r.click_share, `point { fill-color: ${color}; size: ${r.price/3} }`, r.price]);
        });

        const data = google.visualization.arrayToDataTable(chartData);
        const options = {
            hAxis: {title: 'Organic Rank (Lower is better)', direction: -1}, // Invert axis
            vAxis: {title: 'Click Share (%)'},
            legend: 'none',
            chartArea: {width: '85%', height: '80%'},
            explorer: { actions: ['dragToZoom', 'rightClickToReset'] }
        };

        const chart = new google.visualization.ScatterChart(document.getElementById('chart_efficiency'));
        chart.draw(data, options);
    }

    // ------------------------------------------------------------------
    // 4. INSIGHTS & LOGIC
    // ------------------------------------------------------------------
    function updateInsights() {
        // Dynamic Logic based on simulated data
        const insights = [];
        const actions = [];
        const lastWeek = weekList[weekList.length - 1];
        const prevWeek = weekList[weekList.length - 2];
        
        // 1. Price vs Share Logic
        const lastWeekRows = processedData.filter(r => r.week_date === lastWeek && r.is_yaba_asin === 'Y');
        const prevWeekRows = processedData.filter(r => r.week_date === prevWeek && r.is_yaba_asin === 'Y');
        
        const currShare = lastWeekRows.reduce((s,r) => s+r.click_share, 0);
        const prevShare = prevWeekRows.reduce((s,r) => s+r.click_share, 0);
        const hasDeals = lastWeekRows.some(r => r.weekly_number_of_days_with_deal > 0);
        
        if (currShare > prevShare) {
            insights.push(`Trend: ${ourBrand} gained market share (+${(currShare-prevShare).toFixed(1)}%) last week.`);
            if (hasDeals) insights.push("Cause: Active Deals significantly boosted click share visibility.");
        } else {
            insights.push(`Trend: Share stabilized or dipped slightly compared to previous week.`);
        }

        // 2. Competitor Check
        const topComp = competitorList[0];
        insights.push(`Competition: ${topComp} remains the dominant threat with high rank stability.`);

        // 3. Efficiency
        insights.push("Efficiency: Our ASINs perform well when rank < 5. Rank decay > 10 causes disproportionate share loss.");

        // Actions
        if (!hasDeals) actions.push("Activate Coupons on underperforming variants to reclaim Rank.");
        actions.push(`Monitor ${topComp} price strategy; they are aggressive on pricing.`);
        actions.push("Focus SEO on 'Widget' keywords to improve Organic Rank stability.");

        // Render Insights
        const iContainer = document.getElementById('insights-container');
        iContainer.innerHTML = insights.map(t => 
            `<div class="insight-item"><span class="material-icons insight-icon">insights</span><div>${t}</div></div>`
        ).join('');

        // Render Actions
        const aContainer = document.getElementById('actions-container');
        aContainer.innerHTML = actions.map(t => 
            `<div style="background: #E8F0FE; padding: 10px; border-radius: 8px; font-size: 14px; color: #1967D2;">‚û§ ${t}</div>`
        ).join('');
        
        // Render Levers (Simplified)
        const leversDiv = document.getElementById('levers-container');
        leversDiv.innerHTML = `
            <div style="font-size:14px; color:#444;">
                <p><strong>üè∑Ô∏è Price Sensitivity:</strong> High. Lower prices correlate strongly with Share > 10%.</p>
                <p><strong>‚ö° Deals Impact:</strong> <span style="color:green">Positive</span>. Deal weeks show ~30% volume lift.</p>
                <p><strong>üèÜ Badges:</strong> 'Best Seller' held by ${topComp} creates a localized monopoly on top ranks.</p>
            </div>
        `;
    }

    // ------------------------------------------------------------------
    // 5. INTERACTIVE TAB
    // ------------------------------------------------------------------
    function setupInteractiveControls() {
        const weekSel = document.getElementById('sel-week');
        weekList.forEach(w => {
            const opt = document.createElement('option');
            opt.value = w;
            opt.innerText = w;
            weekSel.appendChild(opt);
        });
        weekSel.value = weekList[weekList.length - 1]; // Default latest

        const compSel = document.getElementById('sel-comp');
        competitorList.forEach(c => {
            const opt = document.createElement('option');
            opt.value = c;
            opt.innerText = c;
            compSel.appendChild(opt);
        });
    }

    function updateComparator() {
        const week = document.getElementById('sel-week').value;
        const comp = document.getElementById('sel-comp').value;
        
        const weekData = processedData.filter(r => r.week_date === week);
        
        // Calc Us
        const usData = weekData.filter(r => r.real_brand === ourBrand);
        const usShare = usData.reduce((s,r) => s+r.click_share, 0);
        const usPrice = usData.length ? usData.reduce((s,r) => s+r.price, 0)/usData.length : 0;
        const usRank = usData.length ? usData.reduce((s,r) => s+r.organic_rank, 0)/usData.length : 0;
        
        // Calc Them
        const themData = weekData.filter(r => r.real_brand === comp);
        const themShare = themData.reduce((s,r) => s+r.click_share, 0);
        const themPrice = themData.length ? themData.reduce((s,r) => s+r.price, 0)/themData.length : 0;
        const themRank = themData.length ? themData.reduce((s,r) => s+r.organic_rank, 0)/themData.length : 0;

        // Render UI
        document.getElementById('comp-us-name').innerText = ourBrand;
        document.getElementById('comp-them-name').innerText = comp;
        
        document.getElementById('comp-us-share').innerText = usShare.toFixed(1) + "%";
        document.getElementById('comp-them-share').innerText = themShare.toFixed(1) + "%";
        
        document.getElementById('comp-us-price').innerText = "$" + usPrice.toFixed(2);
        document.getElementById('comp-them-price').innerText = "$" + themPrice.toFixed(2);
        
        document.getElementById('comp-us-rank').innerText = usRank.toFixed(1);
        document.getElementById('comp-them-rank').innerText = themRank.toFixed(1);
        
        // Analysis Text
        const analysis = [];
        if (usPrice < themPrice) analysis.push(`<li>We have a price advantage ($${(themPrice-usPrice).toFixed(2)} cheaper).</li>`);
        else analysis.push(`<li>We are priced higher ($${(usPrice-themPrice).toFixed(2)} premium).</li>`);
        
        if (usRank < themRank) analysis.push("<li>We have better average organic visibility.</li>");
        else analysis.push("<li>They are outranking us organically.</li>");
        
        document.getElementById('comp-analysis-text').innerHTML = analysis.join('');
    }

    // ------------------------------------------------------------------
    // UTILS
    // ------------------------------------------------------------------
    window.switchTab = function(tabName) {
        document.getElementById('tab-static').className = tabName === 'static' ? '' : 'hidden';
        document.getElementById('tab-interactive').className = tabName === 'interactive' ? '' : 'hidden';
        
        const btns = document.getElementsByClassName('tab-btn');
        btns[0].className = tabName === 'static' ? 'tab-btn active' : 'tab-btn';
        btns[1].className = tabName === 'interactive' ? 'tab-btn active' : 'tab-btn';
        
        if(tabName === 'interactive') updateComparator();
    };

    // Initialize
    init();

</script>
</body>
</html>