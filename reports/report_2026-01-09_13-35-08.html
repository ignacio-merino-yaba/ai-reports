<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon ASIN Performance Report - NaturaleBio</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Recharts -->
    <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F5F5F7; color: #1D1D1F; }
        .apple-card { background: white; border-radius: 20px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03); }
        .tab-active { background-color: #007AFF; color: white; }
        .tab-inactive { background-color: #E5E5EA; color: #8E8E93; }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #C7C7CC; border-radius: 4px; }
    </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">
    const { useState, useMemo } = React;
    const { 
        LineChart, Line, AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, 
        ScatterChart, Scatter, ZAxis, ReferenceLine 
    } = Recharts;

    // -------------------------------------------------------------------------
    // DATA INJECTION
    // -------------------------------------------------------------------------
    const marketData = {"meta": {"my_brand": "NaturaleBio", "last_week": "2025-52", "top_competitors": ["NORITUAL LAB", "VAHDAM", "Ceremonial"]}, "global_trend": [{"week": "2025-49", "competitor_clicks": 330827.38047, "my_clicks": 293438.254005, "total_clicks": 624265.634475, "my_share": 47.00535121587753}, {"week": "2025-50", "competitor_clicks": 249353.97564, "my_clicks": 192370.36035, "total_clicks": 441724.33599, "my_share": 43.549866891271975}, {"week": "2025-51", "competitor_clicks": 198133.554756, "my_clicks": 208161.62816400002, "total_clicks": 406295.18292000005, "my_share": 51.23408716489442}, {"week": "2025-52", "competitor_clicks": 188451.885204, "my_clicks": 165426.99109199998, "total_clicks": 353878.876296, "my_share": 46.746783199805776}], "brand_competitiveness": [{"week_date": "2025-49", "Ceremonial": 4.896023843392264, "My Brand": 47.00535121587753, "NORITUAL LAB": 37.04938020727494, "Rest of Market": 5.494818126397073, "VAHDAM": 5.5544266070581845}, {"week_date": "2025-50", "Ceremonial": 5.422112593439319, "My Brand": 43.549866891271975, "NORITUAL LAB": 38.16685968685608, "Rest of Market": 8.649811241295291, "VAHDAM": 4.2113495871373345}, {"week_date": "2025-51", "Ceremonial": 4.359742399281114, "My Brand": 51.23408716489442, "NORITUAL LAB": 35.24337277220308, "Rest of Market": 3.935899355998202, "VAHDAM": 5.226898307623183}, {"week_date": "2025-52", "Ceremonial": 3.4069758031884763, "My Brand": 46.746783199805776, "NORITUAL LAB": 34.922176364273966, "Rest of Market": 7.488333198457015, "VAHDAM": 7.435731434274771}], "scatter_data": [{"asin": "B06XQ5DCYJ", "resolved_brand": "NaturaleBio", "is_yaba_asin": "Y", "estimated_clicks": 105740.77615199998, "weekly_search_volume": 47729.88, "average_organic_rank": 2.0, "price": 15.058571429, "weekly_number_of_days_with_deal": 0, "weekly_number_of_days_with_coupon": 0, "product_title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "calculated_share": 29.880499581883413}, {"asin": "B06XQ69YCQ", "resolved_brand": "NaturaleBio", "is_yaba_asin": "Y", "estimated_clicks": 14318.963999999998, "weekly_search_volume": 47729.88, "average_organic_rank": 4.0, "price": 10.538571429, "weekly_number_of_days_with_deal": 0, "weekly_number_of_days_with_coupon": 0, "product_title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "calculated_share": 4.046289552480376}, {"asin": "B079VQ52MK", "resolved_brand": "NaturaleBio", "is_yaba_asin": "Y", "estimated_clicks": 29983.910615999997, "weekly_search_volume": 47729.88, "average_organic_rank": 5.0, "price": 24.855714286, "weekly_number_of_days_with_deal": 0, "weekly_number_of_days_with_coupon": 0, "product_title": "NaturaleBio Matcha Tee Pulver Bio - Premium-Qualit...", "calculated_share": 8.472930322893909}, {"asin": "B07K1WBH4K", "resolved_brand": "VAHDAM", "is_yaba_asin": "N", "estimated_clicks": 6314.663124, "weekly_search_volume": 47729.88, "average_organic_rank": 20.0, "price": 9.895714286, "weekly_number_of_days_with_deal": 3, "weekly_number_of_days_with_coupon": 0, "product_title": "VAHDAM, Vanille Matcha Gr√ºner Tee Pulver (100g, 50...", "calculated_share": 1.784413692643846}, {"asin": "B07MD4LB49", "resolved_brand": "VAHDAM", "is_yaba_asin": "N", "estimated_clicks": 19998.81972, "weekly_search_volume": 47729.88, "average_organic_rank": 7.0, "price": 9.895714286, "weekly_number_of_days_with_deal": 3, "weekly_number_of_days_with_coupon": 0, "product_title": "VAHDAM, Matcha Gr√ºntee Pulver (100g, 50+ Tassen) A...", "calculated_share": 5.651317741630925}, {"asin": "B07SZFD3P9", "resolved_brand": "NaturaleBio", "is_yaba_asin": "Y", "estimated_clicks": 15383.340324, "weekly_search_volume": 47729.88, "average_organic_rank": 23.0, "price": 30.704285714, "weekly_number_of_days_with_deal": 1, "weekly_number_of_days_with_coupon": 0, "product_title": "NaturaleBio Matcha Ceremonial Grade 100g. Original...", "calculated_share": 4.347063742548085}, {"asin": "B08XVX8V1T", "resolved_brand": "Bio", "is_yaba_asin": "N", "estimated_clicks": 3493.827215999999, "weekly_search_volume": 47729.88, "average_organic_rank": 10.0, "price": 12.367142857, "weekly_number_of_days_with_deal": 0, "weekly_number_of_days_with_coupon": 0, "product_title": "Bio Matcha Pulver 100 g ‚Äì Japan Matcha Tee, 100% n...", "calculated_share": 0.9872946508052116}, {"asin": "B08XVX8V1T", "resolved_brand": "bioKontor", "is_yaba_asin": "N", "estimated_clicks": 11646.090719999997, "weekly_search_volume": 47729.88, "average_organic_rank": 10.0, "price": 12.367142857, "weekly_number_of_days_with_deal": 0, "weekly_number_of_days_with_coupon": 0, "product_title": "Bio Matcha Pulver 100 g ‚Äì Japan Matcha Tee, 100% n...", "calculated_share": 3.290982169350705}, {"asin": "B0CNRX8G5S", "resolved_brand": "NORITUAL LAB", "is_yaba_asin": "N", "estimated_clicks": 107506.781712, "weekly_search_volume": 47729.88, "average_organic_rank": 2.0, "price": 24.648571429, "weekly_number_of_days_with_deal": 0, "weekly_number_of_days_with_coupon": 0, "product_title": "Ceremonial Matcha - Reines Matcha Pulver aus Japan...", "calculated_share": 30.379541960022667}, {"asin": "B0DRP6Y6XC", "resolved_brand": "Matcha", "is_yaba_asin": "N", "estimated_clicks": 4868.44776, "weekly_search_volume": 47729.88, "average_organic_rank": 13.0, "price": 10.71, "weekly_number_of_days_with_deal": 0, "weekly_number_of_days_with_coupon": 7, "product_title": "Matcha Pulver - 90g - 100% Nat√ºrlich & Fein Gemahl...", "calculated_share": 1.375738447843328}, {"asin": "B0DRP6Y6XC", "resolved_brand": "Special Leaves", "is_yaba_asin": "N", "estimated_clicks": 6491.26368, "weekly_search_volume": 47729.88, "average_organic_rank": 13.0, "price": 10.71, "weekly_number_of_days_with_deal": 0, "weekly_number_of_days_with_coupon": 7, "product_title": "Matcha Pulver - 90g - 100% Nat√ºrlich & Fein Gemahl...", "calculated_share": 1.8343179304577708}, {"asin": "B0FSL3C3Z8", "resolved_brand": "Ceremonial", "is_yaba_asin": "N", "estimated_clicks": 12056.567688, "weekly_search_volume": 47729.88, "average_organic_rank": 6.0, "price": 16.037142857, "weekly_number_of_days_with_deal": 0, "weekly_number_of_days_with_coupon": 0, "product_title": "Ceremonial Matcha Ryoku - Reines Gr√ºntee-Pulver au...", "calculated_share": 3.4069758031884763}, {"asin": "B0FSL3C3Z8", "resolved_brand": "NORITUAL LAB", "is_yaba_asin": "N", "estimated_clicks": 16075.423583999998, "weekly_search_volume": 47729.88, "average_organic_rank": 6.0, "price": 16.037142857, "weekly_number_of_days_with_deal": 0, "weekly_number_of_days_with_coupon": 0, "product_title": "Ceremonial Matcha Ryoku - Reines Gr√ºntee-Pulver au...", "calculated_share": 4.542634404251302}], "raw_summary": {"avg_price_my": 20.64, "avg_price_market": 14.34}};

    // -------------------------------------------------------------------------
    // COMPONENTS
    // -------------------------------------------------------------------------

    const StatCard = ({ title, value, subtext, trend, icon }) => (
        <div className="apple-card p-6 flex flex-col justify-between h-full">
            <div className="flex items-center justify-between mb-4">
                <h3 className="text-sm font-medium text-gray-500 uppercase tracking-wider">{title}</h3>
                {icon && <i data-lucide={icon} className="text-gray-400 w-5 h-5"></i>}
            </div>
            <div>
                <div className="text-3xl font-bold text-gray-900">{value}</div>
                {subtext && <div className="text-sm text-gray-500 mt-1">{subtext}</div>}
                {trend && (
                    <div className={`text-sm font-medium mt-2 flex items-center ${trend === 'up' ? 'text-green-500' : 'text-red-500'}`}>
                        {trend === 'up' ? '‚ñ≤' : '‚ñº'} Trend
                    </div>
                )}
            </div>
        </div>
    );

    const SectionHeader = ({ title, subtitle }) => (
        <div className="mb-6 mt-10">
            <h2 className="text-2xl font-bold text-gray-900">{title}</h2>
            <p className="text-gray-500 mt-1">{subtitle}</p>
        </div>
    );

    const InsightsList = ({ insights }) => (
        <div className="apple-card p-6 bg-blue-50 border border-blue-100">
            <h4 className="flex items-center text-blue-800 font-semibold mb-4">
                <span className="mr-2">üí°</span> Insights Clave
            </h4>
            <ul className="space-y-3">
                {insights.map((insight, idx) => (
                    <li key={idx} className="flex items-start text-sm text-gray-700">
                        <span className="w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"></span>
                        {insight}
                    </li>
                ))}
            </ul>
        </div>
    );

    const RecommendationsList = ({ recommendations }) => (
        <div className="apple-card p-6 bg-green-50 border border-green-100">
            <h4 className="flex items-center text-green-800 font-semibold mb-4">
                <span className="mr-2">üöÄ</span> Acciones Recomendadas
            </h4>
            <ul className="space-y-3">
                {recommendations.map((rec, idx) => (
                    <li key={idx} className="flex items-start text-sm text-gray-700">
                        <span className="w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 mr-2 flex-shrink-0"></span>
                        {rec}
                    </li>
                ))}
            </ul>
        </div>
    );

    // -------------------------------------------------------------------------
    // DASHBOARD VIEWS
    // -------------------------------------------------------------------------

    const StaticReport = () => {
        const colors = { my: '#007AFF', comp1: '#FF9500', comp2: '#FF3B30', comp3: '#AF52DE', rest: '#8E8E93' };

        return (
            <div className="space-y-8 animate-in fade-in duration-500">
                
                {/* 1. Global Trend */}
                <SectionHeader title="1. Tendencia Global del Parent" subtitle="Evoluci√≥n de Clicks Totales y Cuota de Mercado (√öltimas 4 Semanas)" />
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div className="col-span-2 apple-card p-6">
                        <h4 className="text-sm font-semibold text-gray-600 mb-4">Evoluci√≥n de Clicks Estimados (Nosotros vs Competencia)</h4>
                        <div className="h-64">
                            <ResponsiveContainer width="100%" height="100%">
                                <AreaChart data={marketData.global_trend}>
                                    <defs>
                                        <linearGradient id="colorMy" x1="0" y1="0" x2="0" y2="1">
                                            <stop offset="5%" stopColor={colors.my} stopOpacity={0.2}/>
                                            <stop offset="95%" stopColor={colors.my} stopOpacity={0}/>
                                        </linearGradient>
                                        <linearGradient id="colorComp" x1="0" y1="0" x2="0" y2="1">
                                            <stop offset="5%" stopColor={colors.rest} stopOpacity={0.2}/>
                                            <stop offset="95%" stopColor={colors.rest} stopOpacity={0}/>
                                        </linearGradient>
                                    </defs>
                                    <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#E5E5EA" />
                                    <XAxis dataKey="week" axisLine={false} tickLine={false} tick={{fill: '#8E8E93'}} />
                                    <YAxis axisLine={false} tickLine={false} tick={{fill: '#8E8E93'}} />
                                    <Tooltip contentStyle={{borderRadius: '12px', border: 'none', boxShadow: '0 4px 12px rgba(0,0,0,0.1)'}} />
                                    <Legend />
                                    <Area type="monotone" dataKey="my_clicks" name="Mis Clicks" stroke={colors.my} fillOpacity={1} fill="url(#colorMy)" />
                                    <Area type="monotone" dataKey="competitor_clicks" name="Competencia" stroke={colors.rest} fillOpacity={1} fill="url(#colorComp)" />
                                </AreaChart>
                            </ResponsiveContainer>
                        </div>
                    </div>
                    <div className="col-span-1 apple-card p-6 flex flex-col justify-center">
                         <div className="mb-6">
                            <h4 className="text-gray-500 text-sm font-medium">Cuota de Mercado Actual</h4>
                            <div className="text-4xl font-bold text-gray-900 mt-2">
                                {marketData.global_trend[marketData.global_trend.length-1].my_share.toFixed(1)}%
                            </div>
                            <div className="text-sm text-red-500 mt-1 font-medium">
                                ‚ñº -4.5% vs semana anterior
                            </div>
                        </div>
                        <div className="border-t pt-4">
                            <p className="text-sm text-gray-600 leading-relaxed">
                                <strong>An√°lisis:</strong> La marca pierde tracci√≥n en la semana 52, con una ca√≠da simult√°nea en el volumen total del mercado. La competencia cae menos, lo que erosiona nuestra cuota.
                            </p>
                        </div>
                    </div>
                </div>

                {/* 2. Competitiveness */}
                <SectionHeader title="2. Competitividad de Marca" subtitle={`Comparativa vs Top 3: ${marketData.meta.top_competitors.join(', ')}`} />
                <div className="apple-card p-6">
                     <h4 className="text-sm font-semibold text-gray-600 mb-4">Click Share por Marca (%)</h4>
                     <div className="h-72">
                        <ResponsiveContainer width="100%" height="100%">
                            <LineChart data={marketData.brand_competitiveness}>
                                <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#E5E5EA" />
                                <XAxis dataKey="week_date" axisLine={false} tickLine={false} tick={{fill: '#8E8E93'}} />
                                <YAxis domain={[0, 60]} axisLine={false} tickLine={false} tick={{fill: '#8E8E93'}} />
                                <Tooltip contentStyle={{borderRadius: '12px', border: 'none', boxShadow: '0 4px 12px rgba(0,0,0,0.1)'}} />
                                <Legend />
                                <Line type="monotone" dataKey="My Brand" name={marketData.meta.my_brand} stroke={colors.my} strokeWidth={3} dot={{r:4}} />
                                <Line type="monotone" dataKey={marketData.meta.top_competitors[0]} stroke={colors.comp1} strokeWidth={2} dot={false} />
                                <Line type="monotone" dataKey={marketData.meta.top_competitors[1]} stroke={colors.comp2} strokeWidth={2} dot={false} />
                                <Line type="monotone" dataKey="Rest of Market" stroke={colors.rest} strokeDasharray="5 5" strokeWidth={1} dot={false} />
                            </LineChart>
                        </ResponsiveContainer>
                     </div>
                </div>

                {/* 3 & 4. Efficiency & Levers */}
                <SectionHeader title="3 & 4. Palancas y Eficiencia (Organic Rank vs Share)" subtitle="Dispersi√≥n de ASINs en la √∫ltima semana. Eje X: Rank (Menor es mejor). Eje Y: Share." />
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div className="col-span-2 apple-card p-6">
                         <div className="h-80">
                            <ResponsiveContainer width="100%" height="100%">
                                <ScatterChart margin={{top: 20, right: 20, bottom: 20, left: 20}}>
                                    <CartesianGrid />
                                    <XAxis type="number" dataKey="average_organic_rank" name="Rank Org√°nico" reversed={true} label={{ value: 'Rank (Inverso)', position: 'insideBottomRight', offset: -10 }} />
                                    <YAxis type="number" dataKey="calculated_share" name="Share %" unit="%" label={{ value: 'Click Share %', angle: -90, position: 'insideLeft' }} />
                                    <Tooltip cursor={{ strokeDasharray: '3 3' }} content={({ active, payload }) => {
                                        if (active && payload && payload.length) {
                                            const data = payload[0].payload;
                                            return (
                                                <div className="bg-white p-3 border border-gray-100 shadow-lg rounded-lg text-xs">
                                                    <p className="font-bold">{data.resolved_brand}</p>
                                                    <p className="truncate w-40">{data.product_title}</p>
                                                    <p>Rank: {data.average_organic_rank} | Share: {data.calculated_share.toFixed(1)}%</p>
                                                    <p>Precio: {data.price.toFixed(2)}‚Ç¨</p>
                                                </div>
                                            );
                                        }
                                        return null;
                                    }} />
                                    <Legend />
                                    <ReferenceLine x={10} stroke="red" strokeDasharray="3 3" label="Top 10" />
                                    
                                    {/* Split data for coloring */}
                                    <Scatter name="Nuestros ASINs" data={marketData.scatter_data.filter(d => d.is_yaba_asin === 'Y')} fill={colors.my} shape="circle" />
                                    <Scatter name="Competidores" data={marketData.scatter_data.filter(d => d.is_yaba_asin === 'N')} fill={colors.rest} shape="triangle" />
                                </ScatterChart>
                            </ResponsiveContainer>
                        </div>
                    </div>
                     <div className="col-span-1 space-y-4">
                        <StatCard title="Precio Promedio" value={`${marketData.raw_summary.avg_price_my}‚Ç¨`} subtext={`Vs Mercado: ${marketData.raw_summary.avg_price_market}‚Ç¨`} trend="down" />
                        <div className="apple-card p-4">
                            <h5 className="font-semibold text-sm mb-2">An√°lisis de Palancas</h5>
                            <p className="text-xs text-gray-600 mb-2">
                                <strong>Precio:</strong> Nuestro Top Seller (15.06‚Ç¨) es MUY competitivo vs el Top Competidor (24.65‚Ç¨), logrando el mismo Rank (2.0).
                            </p>
                             <p className="text-xs text-gray-600 mb-2">
                                <strong>Deals:</strong> VAHDAM us√≥ 3 d√≠as de deals pero su share sigue bajo (5.6%). El rank org√°nico domina sobre las promociones esta semana.
                            </p>
                        </div>
                    </div>
                </div>

                {/* 5. Conclusions */}
                <SectionHeader title="5. Conclusiones y Recomendaciones" subtitle="S√≠ntesis estrat√©gica basada en datos" />
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 pb-10">
                    <InsightsList insights={[
                        "NaturaleBio domina en Rank (Top 2-5) pero ha perdido 4.5 puntos de cuota esta semana.",
                        "El competidor NORITUAL LAB iguala nuestro mejor Rank (2.0) con un precio +60% m√°s alto (24‚Ç¨ vs 15‚Ç¨), sugiriendo una conversi√≥n o imagen de marca superior.",
                        "Nuestros ASINs secundarios (Rank 23, 30‚Ç¨) son ineficientes y arrastran el promedio.",
                        "La sensibilidad al precio parece baja en el segmento premium, dado el √©xito de NORITUAL.",
                        "Los deals de competidores (VAHDAM) no est√°n logrando desplazar nuestro posicionamiento org√°nico."
                    ]} />
                    <RecommendationsList recommendations={[
                        "Auditar listing de NORITUAL LAB: Copiar sus claves de conversi√≥n (im√°genes, claims) dado que venden m√°s caro.",
                        "Revisar precio del ASIN B07SZFD3P9 (30.70‚Ç¨): Est√° fuera de mercado (Rank 23). Bajar precio o activar cup√≥n agresivo.",
                        "Defender el ASIN B06XQ5DCYJ: Es nuestro baluarte. Monitorizar su Rank 2.0 diariamente; si cae a 3.0, aumentar puja en PPC defensa.",
                        "No sobre-reaccionar a los deals de VAHDAM por ahora, su impacto es m√≠nimo."
                    ]} />
                </div>
            </div>
        );
    };

    const InteractiveComparator = () => {
        const [selectedWeek, setSelectedWeek] = useState(marketData.meta.last_week);
        const [selectedComp, setSelectedComp] = useState(marketData.meta.top_competitors[0]);

        // Filter data based on selection
        const myData = marketData.scatter_data.filter(d => d.is_yaba_asin === 'Y').sort((a,b) => b.calculated_share - a.calculated_share)[0]; // Get Top ASIN
        const compData = marketData.scatter_data.find(d => d.resolved_brand === selectedComp) || { price: 0, average_organic_rank: 0, calculated_share: 0, product_title: "No Data" };

        return (
            <div className="animate-in fade-in duration-500">
                <div className="flex gap-4 mb-8">
                     <select className="p-3 bg-white border border-gray-200 rounded-xl" value={selectedWeek} onChange={e => setSelectedWeek(e.target.value)}>
                        {marketData.global_trend.map(d => <option key={d.week} value={d.week}>{d.week}</option>)}
                    </select>
                    <select className="p-3 bg-white border border-gray-200 rounded-xl" value={selectedComp} onChange={e => setSelectedComp(e.target.value)}>
                        {marketData.meta.top_competitors.map(c => <option key={c} value={c}>{c}</option>)}
                    </select>
                </div>

                <div className="grid grid-cols-2 gap-8">
                    {/* My Card */}
                    <div className="apple-card p-8 border-t-4 border-blue-500">
                        <h3 className="text-xl font-bold text-gray-900 mb-1">{marketData.meta.my_brand}</h3>
                        <p className="text-sm text-gray-500 mb-6 line-clamp-1">{myData.product_title}</p>
                        
                        <div className="space-y-6">
                            <div className="flex justify-between items-center pb-4 border-b">
                                <span className="text-gray-600">Share</span>
                                <span className="text-2xl font-bold text-blue-600">{myData.calculated_share.toFixed(1)}%</span>
                            </div>
                             <div className="flex justify-between items-center pb-4 border-b">
                                <span className="text-gray-600">Rank Org√°nico</span>
                                <span className="text-2xl font-bold text-gray-900">#{myData.average_organic_rank}</span>
                            </div>
                             <div className="flex justify-between items-center">
                                <span className="text-gray-600">Precio</span>
                                <span className="text-2xl font-bold text-gray-900">{myData.price.toFixed(2)}‚Ç¨</span>
                            </div>
                        </div>
                    </div>

                    {/* Competitor Card */}
                    <div className="apple-card p-8 border-t-4 border-gray-400 bg-gray-50">
                        <h3 className="text-xl font-bold text-gray-900 mb-1">{selectedComp}</h3>
                        <p className="text-sm text-gray-500 mb-6 line-clamp-1">{compData.product_title}</p>
                        
                        <div className="space-y-6">
                            <div className="flex justify-between items-center pb-4 border-b border-gray-200">
                                <span className="text-gray-600">Share</span>
                                <span className="text-2xl font-bold text-gray-600">{compData.calculated_share.toFixed(1)}%</span>
                            </div>
                             <div className="flex justify-between items-center pb-4 border-b border-gray-200">
                                <span className="text-gray-600">Rank Org√°nico</span>
                                <span className="text-2xl font-bold text-gray-900">#{compData.average_organic_rank}</span>
                            </div>
                             <div className="flex justify-between items-center">
                                <span className="text-gray-600">Precio</span>
                                <span className="text-2xl font-bold text-gray-900">{compData.price.toFixed(2)}‚Ç¨</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div className="mt-8 p-4 bg-yellow-50 rounded-xl border border-yellow-100 text-sm text-yellow-800">
                    <strong>Comparativa Directa:</strong> 
                    {myData.price < compData.price 
                        ? ` Eres ${((1 - myData.price/compData.price)*100).toFixed(0)}% m√°s barato que ${selectedComp}. ` 
                        : ` Eres m√°s caro que ${selectedComp}. `}
                    {myData.average_organic_rank <= compData.average_organic_rank
                        ? "Tu posicionamiento org√°nico es superior o igual."
                        : "Est√°n mejor posicionados org√°nicamente."}
                </div>
            </div>
        );
    };

    // -------------------------------------------------------------------------
    // APP CONTAINER
    // -------------------------------------------------------------------------

    const App = () => {
        const [activeTab, setActiveTab] = useState('static');

        return (
            <div className="max-w-6xl mx-auto p-6 md:p-10">
                <header className="flex flex-col md:flex-row justify-between items-start md:items-center mb-10">
                    <div>
                        <h1 className="text-3xl font-bold text-gray-900 tracking-tight">Parent ASIN Intelligence</h1>
                        <p className="text-gray-500 mt-1">An√°lisis Estrat√©gico para <span className="text-blue-600 font-semibold">{marketData.meta.my_brand}</span> ‚Ä¢ Semanas {marketData.global_trend[0].week} - {marketData.meta.last_week}</p>
                    </div>
                    <div className="flex mt-4 md:mt-0 bg-gray-200 rounded-lg p-1">
                        <button 
                            onClick={() => setActiveTab('static')}
                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${activeTab === 'static' ? 'bg-white shadow-sm text-gray-900' : 'text-gray-500 hover:text-gray-700'}`}
                        >
                            Reporte Est√°tico
                        </button>
                        <button 
                            onClick={() => setActiveTab('interactive')}
                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${activeTab === 'interactive' ? 'bg-white shadow-sm text-gray-900' : 'text-gray-500 hover:text-gray-700'}`}
                        >
                            Comparador
                        </button>
                    </div>
                </header>

                <main>
                    {activeTab === 'static' ? <StaticReport /> : <InteractiveComparator />}
                </main>
                
                <footer className="mt-20 border-t pt-6 text-center text-gray-400 text-xs">
                    Generated by Amazon Market Intelligence AI ‚Ä¢ Data Source: Internal CSV
                </footer>
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

    // Initialize Lucide icons
    lucide.createIcons();
</script>

</body>
</html>