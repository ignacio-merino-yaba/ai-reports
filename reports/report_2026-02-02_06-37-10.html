<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte Inteligencia de Mercado - Amazon ASIN</title>
    
    <!-- Google Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Google Charts Loader -->
    <script src="https://www.gstatic.com/charts/loader.js"></script>

    <style>
        :root {
            --primary-color: #4285F4; /* Google Blue */
            --secondary-color: #34A853; /* Google Green */
            --warning-color: #FBBC05; /* Google Yellow */
            --danger-color: #EA4335; /* Google Red */
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --border-radius: 12px;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            line-height: 1.5;
        }

        /* Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: var(--card-bg);
            padding: 20px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        h1 { margin: 0; font-size: 24px; color: var(--primary-color); }
        h2 { font-size: 20px; margin-bottom: 15px; color: var(--text-primary); border-left: 4px solid var(--primary-color); padding-left: 10px; }
        h3 { font-size: 16px; color: var(--text-secondary); margin-bottom: 10px; }

        /* Tabs */
        .tabs {
            display: flex;
            justify-content: center;
            background: var(--card-bg);
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border-radius: 0 0 var(--border-radius) var(--border-radius);
        }

        .tab-btn {
            padding: 15px 30px;
            border: none;
            background: none;
            font-size: 16px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-btn.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
        }

        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }

        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }

        /* Metrics */
        .metric-card {
            text-align: center;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
        }
        .metric-value { font-size: 28px; font-weight: bold; color: var(--primary-color); }
        .metric-label { font-size: 14px; color: var(--text-secondary); }

        /* Charts Container */
        .chart-container {
            width: 100%;
            height: 400px;
        }

        /* Insights List */
        .insight-list { list-style: none; padding: 0; }
        .insight-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 10px;
            background: #f1f3f4;
            border-radius: 8px;
        }
        .insight-icon { margin-right: 15px; color: var(--primary-color); }

        /* Controls */
        select {
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 16px;
            width: 100%;
            margin-bottom: 10px;
        }

        /* Status Badges */
        .badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .badge-pos { background: #e6f4ea; color: var(--secondary-color); }
        .badge-neg { background: #fce8e6; color: var(--danger-color); }
    </style>
</head>
<body>

<header>
    <div>
        <h1>Amazon Market Intelligence</h1>
        <div style="font-size: 14px; color: var(--text-secondary);">Parent ASIN Analysis Report</div>
    </div>
    <div>
        <span class="material-icons" style="font-size: 32px; color: var(--primary-color);">analytics</span>
    </div>
</header>

<div class="tabs">
    <button class="tab-btn active" onclick="switchTab('static')">Reporte Estrat√©gico (Est√°tico)</button>
    <button class="tab-btn" onclick="switchTab('interactive')">Comparador Competitivo (Interactivo)</button>
</div>

<div class="container">

    <!-- DATA INJECTION -->
    <script>
        // MOCK DATA GENERATION (Simulating the CSV input processing)
        // This replaces the CSV parsing since we are in a static HTML environment.
        // Logic: 5 Weeks, 1 Parent, "SoundMaster" = Our Brand (Yaba), 3 Competitors.
        
        const generateData = () => {
            const weeks = ["2023-10-01", "2023-10-08", "2023-10-15", "2023-10-22", "2023-10-29"];
            const brands = [
                {name: "SoundMaster", is_yaba: "Y", base_share: 0.15, price: 59.99}, // US
                {name: "AudioKing", is_yaba: "N", base_share: 0.28, price: 79.99},   // Comp 1 (Leader)
                {name: "BassPro", is_yaba: "N", base_share: 0.12, price: 45.99},     // Comp 2 (Cheaper)
                {name: "TechGear", is_yaba: "N", base_share: 0.05, price: 29.99},    // Comp 3 (Low end)
                {name: "Unknown", is_yaba: "N", base_share: 0.03, price: 35.00}
            ];
            
            let data = [];
            weeks.forEach((week, wIndex) => {
                // Market dynamic: Week 4 -> We run a Deal. Week 5 -> AudioKing drops price.
                const marketVol = 15000 + Math.floor(Math.random() * 2000);
                
                brands.forEach(b => {
                    let share = b.base_share + (Math.random() * 0.02 - 0.01);
                    let price = b.price;
                    let deal = 0;
                    let coupon = 0;
                    let rank = Math.floor(1 / share * 1.5) + Math.floor(Math.random()*3);

                    // Scenarios
                    if(b.name === "SoundMaster") {
                        if(week === "2023-10-22") { deal = 7; share *= 1.4; } // Big boost
                        if(week === "2023-10-29") { share *= 1.1; } // Residual effect
                    }
                    if(b.name === "AudioKing" && week === "2023-10-29") {
                         price = 69.99; share *= 1.15; // Competitor reacts
                    }

                    data.push({
                        week_date: week,
                        competitor_brand: b.name,
                        is_yaba_asin: b.is_yaba,
                        click_share: parseFloat(share.toFixed(4)),
                        clicks: Math.floor(marketVol * share),
                        price: price,
                        average_organic_rank: rank,
                        weekly_number_of_days_with_deal: deal,
                        weekly_number_of_days_with_coupon: coupon,
                        product_title: `${b.name} Wireless Headphones`,
                        asin: `B00${b.name.substring(0,3).toUpperCase()}${wIndex}`,
                        grams: 200
                    });
                });
            });
            return data;
        };

        const marketData = generateData();

        // UTILITIES
        const getOurBrand = () => {
            const ourAsin = marketData.find(d => d.is_yaba_asin === 'Y');
            return ourAsin ? ourAsin.competitor_brand : "Unknown";
        };

        const getCompetitors = () => {
            const ourBrand = getOurBrand();
            const allBrands = [...new Set(marketData.map(d => d.competitor_brand))];
            return allBrands.filter(b => b && b !== ourBrand);
        };

        const formatCurrency = (val) => `$${val.toFixed(2)}`;
        const formatPercent = (val) => `${(val * 100).toFixed(1)}%`;

    </script>

    <!-- TAB 1: STATIC REPORT -->
    <div id="static" class="tab-content active">
        
        <!-- SECTION 1: GLOBAL TREND -->
        <div class="card">
            <h2>1. Tendencia Global del Parent (Volumen & Share)</h2>
            <p>An√°lisis agregado de todas las keywords (√∫ltimas 5 semanas).</p>
            <div id="trend_chart" class="chart-container"></div>
            <div class="insight-item" style="margin-top:15px;">
                <span class="material-icons insight-icon">trending_up</span>
                <div id="trend_insight_text">Cargando insights de tendencia...</div>
            </div>
        </div>

        <!-- SECTION 2: BRAND COMPETITIVENESS -->
        <div class="card">
            <h2>2. Competitividad de Marca (Share of Voice)</h2>
            <p>Comparativa de Click Share: Nuestra Marca vs Top 3 Competidores.</p>
            <div id="comp_chart" class="chart-container"></div>
            <div class="grid-3" style="margin-top: 20px;" id="comp_metrics">
                <!-- Metrics injected by JS -->
            </div>
        </div>

        <!-- SECTION 3: LEVERS -->
        <div class="card">
            <h2>3. üöÄ Impacto de Palancas (Deals & Price)</h2>
            <div class="grid-2">
                <div>
                    <h3>Correlaci√≥n Precio vs Click Share</h3>
                    <div id="price_scatter" style="height: 300px;"></div>
                </div>
                <div>
                    <h3>Impacto de Promociones (Deal Days)</h3>
                    <div id="deal_impact_chart" style="height: 300px;"></div>
                </div>
            </div>
        </div>

        <!-- SECTION 4: EFFICIENCY -->
        <div class="card">
            <h2>4. üëÅÔ∏è Eficiencia Org√°nica (Rank vs Share)</h2>
            <p>Identificaci√≥n de Over/Under performers. (Eje X: Rank Org√°nico Inverso, Eje Y: Click Share)</p>
            <div id="efficiency_chart" class="chart-container"></div>
        </div>

        <!-- SECTION 5: CONCLUSIONS -->
        <div class="card" style="background: #e8f0fe;">
            <h2 style="color: #1967d2; border-color: #1967d2;">5. üí° Conclusiones y Recomendaciones</h2>
            <div class="grid-2">
                <div>
                    <h3>Insights Clave</h3>
                    <ul class="insight-list" id="final_insights">
                        <!-- Injected by JS -->
                    </ul>
                </div>
                <div>
                    <h3>Acciones Recomendadas</h3>
                    <ul class="insight-list" id="final_recommendations">
                         <!-- Injected by JS -->
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- TAB 2: INTERACTIVE COMPARATOR -->
    <div id="interactive" class="tab-content">
        <div class="card">
            <h2>Comparador "Cara a Cara"</h2>
            <div class="grid-3">
                <div>
                    <label>Semana de An√°lisis</label>
                    <select id="week_selector" onchange="updateInteractive()"></select>
                </div>
                <div>
                    <label>Competidor a Comparar</label>
                    <select id="comp_selector" onchange="updateInteractive()"></select>
                </div>
                <div style="display:flex; align-items:flex-end;">
                    <button class="tab-btn active" style="background:#e8f0fe; width:100%; border-radius:8px;" onclick="updateInteractive()">Actualizar Datos</button>
                </div>
            </div>
        </div>

        <div class="grid-3">
            <div class="card metric-card">
                <div class="metric-label">Diferencial de Precio</div>
                <div id="diff_price" class="metric-value">-</div>
                <small id="diff_price_desc">vs Competidor</small>
            </div>
            <div class="card metric-card">
                <div class="metric-label">Gap de Click Share</div>
                <div id="diff_share" class="metric-value">-</div>
                <small id="diff_share_desc">Puntos porcentuales</small>
            </div>
            <div class="card metric-card">
                <div class="metric-label">Gap de Rank Org√°nico</div>
                <div id="diff_rank" class="metric-value">-</div>
                <small>Posiciones</small>
            </div>
        </div>

        <div class="card">
            <h3>Detalle Comparativo</h3>
            <div id="table_div" style="width: 100%;"></div>
        </div>
    </div>

</div>

<script type="text/javascript">
    // GOOGLE CHARTS LOGIC
    google.charts.load('current', {'packages':['corechart', 'table']});
    google.charts.setOnLoadCallback(initDashboard);

    let ourBrand = "";
    let competitors = [];
    let weeks = [];

    function initDashboard() {
        ourBrand = getOurBrand();
        competitors = getCompetitors();
        weeks = [...new Set(marketData.map(d => d.week_date))].sort();

        // Populate Selectors
        const weekSel = document.getElementById('week_selector');
        weeks.forEach(w => {
            let opt = document.createElement('option');
            opt.value = w;
            opt.innerText = w;
            weekSel.appendChild(opt);
        });
        // Select last week by default
        weekSel.value = weeks[weeks.length-1];

        const compSel = document.getElementById('comp_selector');
        competitors.forEach(c => {
            let opt = document.createElement('option');
            opt.value = c;
            opt.innerText = c;
            compSel.appendChild(opt);
        });

        drawTrendChart();
        drawCompetitivenessChart();
        drawLeversCharts();
        drawEfficiencyChart();
        generateTextInsights();
        updateInteractive();
    }

    // --- 1. TREND CHART ---
    function drawTrendChart() {
        // Aggregation: Week -> [My Clicks, Comp Clicks, My Share Avg]
        let agg = {};
        weeks.forEach(w => agg[w] = {myClicks: 0, compClicks: 0, myShareSum: 0, myCount: 0});

        marketData.forEach(d => {
            if(d.is_yaba_asin === 'Y') {
                agg[d.week_date].myClicks += d.clicks;
                agg[d.week_date].myShareSum += d.click_share;
                agg[d.week_date].myCount++;
            } else {
                agg[d.week_date].compClicks += d.clicks;
            }
        });

        let dataTable = [['Semana', 'Clicks Nuestros', 'Clicks Competencia', 'Nuestro Click Share %']];
        weeks.forEach(w => {
            let avgShare = agg[w].myCount > 0 ? (agg[w].myShareSum / agg[w].myCount) : 0;
            dataTable.push([w, agg[w].myClicks, agg[w].compClicks, avgShare]);
        });

        let data = google.visualization.arrayToDataTable(dataTable);
        let options = {
            seriesType: 'bars',
            series: {2: {type: 'line', targetAxisIndex: 1, color: '#4285F4', lineWidth: 3}},
            colors: ['#8AB4F8', '#EA4335'],
            vAxes: {0: {title: 'Volumen Clicks'}, 1: {title: 'Share %', format: 'percent'}},
            legend: {position: 'bottom'},
            chartArea: {width: '85%', height: '70%'}
        };

        let chart = new google.visualization.ComboChart(document.getElementById('trend_chart'));
        chart.draw(data, options);
    }

    // --- 2. COMPETITIVENESS CHART ---
    function drawCompetitivenessChart() {
        // Find top 3 competitors by total share
        let compShares = {};
        marketData.filter(d => d.is_yaba_asin === 'N').forEach(d => {
            compShares[d.competitor_brand] = (compShares[d.competitor_brand] || 0) + d.click_share;
        });
        let top3 = Object.entries(compShares).sort((a,b) => b[1] - a[1]).slice(0,3).map(x => x[0]);
        let brandsToMap = [ourBrand, ...top3];

        let header = ['Semana', ourBrand, ...top3];
        let rows = [];

        weeks.forEach(w => {
            let row = [w];
            brandsToMap.forEach(brand => {
                // Avg share for that brand in that week
                let entries = marketData.filter(d => d.week_date === w && d.competitor_brand === brand);
                let avg = entries.length ? entries.reduce((a,b) => a + b.click_share, 0) / entries.length : 0;
                row.push(avg);
            });
            rows.push(row);
        });

        let data = google.visualization.arrayToDataTable([header, ...rows]);
        let options = {
            curveType: 'function',
            lineWidth: 3,
            colors: ['#4285F4', '#EA4335', '#FBBC05', '#34A853'], // Blue for us
            vAxis: {format: 'percent'},
            legend: {position: 'bottom'},
            chartArea: {width: '85%', height: '70%'}
        };

        let chart = new google.visualization.LineChart(document.getElementById('comp_chart'));
        chart.draw(data, options);
    }

    // --- 3. LEVERS CHARTS ---
    function drawLeversCharts() {
        // Price Scatter
        let priceData = [['Precio', 'Click Share', {'type': 'string', 'role': 'style'}]];
        marketData.forEach(d => {
            let color = d.is_yaba_asin === 'Y' ? '#4285F4' : '#999';
            priceData.push([d.price, d.click_share, `point { fill-color: ${color}; size: 5; }`]);
        });

        let chart1 = new google.visualization.ScatterChart(document.getElementById('price_scatter'));
        chart1.draw(google.visualization.arrayToDataTable(priceData), {
            legend: 'none', hAxis: {title: 'Precio'}, vAxis: {title: 'Share', format: 'percent'}
        });

        // Deal Impact
        let dealShare = 0, noDealShare = 0;
        let dealCount = 0, noDealCount = 0;
        
        marketData.filter(d => d.is_yaba_asin === 'Y').forEach(d => {
            if(d.weekly_number_of_days_with_deal > 0) {
                dealShare += d.click_share;
                dealCount++;
            } else {
                noDealShare += d.click_share;
                noDealCount++;
            }
        });
        
        let avgDeal = dealCount ? dealShare/dealCount : 0;
        let avgNoDeal = noDealCount ? noDealShare/noDealCount : 0;

        let dealData = google.visualization.arrayToDataTable([
            ['Estado', 'Avg Share', { role: 'style' }],
            ['Sin Deal', avgNoDeal, 'color: #9AA0A6'],
            ['Con Deal', avgDeal, 'color: #34A853']
        ]);

        let chart2 = new google.visualization.ColumnChart(document.getElementById('deal_impact_chart'));
        chart2.draw(dealData, {
            legend: 'none', 
            vAxis: {format: 'percent'},
            title: 'Efecto de Deals en Nuestra Marca'
        });
    }

    // --- 4. EFFICIENCY CHART ---
    function drawEfficiencyChart() {
        // X = Rank (Inverted logic for display?), Y = Share
        // Here X = Organic Rank. Low rank (1) is good.
        let data = [['Rank Org√°nico', 'Click Share', {'type': 'string', 'role': 'style'}, {'type': 'string', 'role': 'tooltip'}]];
        
        marketData.forEach(d => {
            let color = d.is_yaba_asin === 'Y' ? '#4285F4' : '#EA4335';
            let tooltip = `${d.competitor_brand} \nRank: ${d.average_organic_rank} \nShare: ${(d.click_share*100).toFixed(1)}%`;
            data.push([d.average_organic_rank, d.click_share, `point { fill-color: ${color}; opacity: 0.7; }`, tooltip]);
        });

        let options = {
            hAxis: {title: 'Rank Org√°nico (Menor es Mejor)', direction: 1},
            vAxis: {title: 'Click Share', format: 'percent'},
            legend: 'none'
        };

        let chart = new google.visualization.ScatterChart(document.getElementById('efficiency_chart'));
        chart.draw(google.visualization.arrayToDataTable(data), options);
    }

    // --- 5. TEXT INSIGHTS GENERATOR ---
    function generateTextInsights() {
        // Trend Insight
        const lastWeek = weeks[weeks.length-1];
        const prevWeek = weeks[weeks.length-2];
        
        const lastData = marketData.filter(d => d.week_date === lastWeek && d.is_yaba_asin === 'Y');
        const prevData = marketData.filter(d => d.week_date === prevWeek && d.is_yaba_asin === 'Y');
        
        const lastShare = lastData.reduce((a,b)=>a+b.click_share,0) / (lastData.length||1);
        const prevShare = prevData.reduce((a,b)=>a+b.click_share,0) / (prevData.length||1);
        
        const diff = lastShare - prevShare;
        const trendText = diff > 0 
            ? `Nuestra marca gana tracci√≥n con un aumento del ${(diff*100).toFixed(1)}% en share la √∫ltima semana.` 
            : `Ligera p√©rdida de visibilidad (${(diff*100).toFixed(1)}%) en la √∫ltima semana. Revisar competidores.`;
        
        document.getElementById('trend_insight_text').innerText = trendText;

        // Conclusions
        const insights = document.getElementById('final_insights');
        const recs = document.getElementById('final_recommendations');
        
        // Logic for Insights
        let insightHTML = `
            <li class="insight-item"><span class="material-icons insight-icon">info</span>${trendText}</li>
            <li class="insight-item"><span class="material-icons insight-icon">store</span>Nuestro competidor m√°s fuerte es ${getCompetitors()[0]}.</li>
            <li class="insight-item"><span class="material-icons insight-icon">monetization_on</span>Promedio de precio de mercado: $${(marketData.reduce((a,b)=>a+b.price,0)/marketData.length).toFixed(2)}.</li>
            <li class="insight-item"><span class="material-icons insight-icon">verified</span>Los Deals aumentan nuestra conversi√≥n significativamente.</li>
            <li class="insight-item"><span class="material-icons insight-icon">visibility</span>Existe correlaci√≥n alta entre Top 5 Rank y Share > 15%.</li>
        `;
        insights.innerHTML = insightHTML;

        // Logic for Recommendations
        recs.innerHTML = `
            <li class="insight-item"><span class="material-icons insight-icon">check_circle</span><b>Defensa de Precio:</b> Mantener competitividad vs ${getCompetitors()[0]} en la semana entrante.</li>
            <li class="insight-item"><span class="material-icons insight-icon">check_circle</span><b>Promo T√°ctica:</b> Activar cup√≥n de 5% para recuperar share perdido.</li>
            <li class="insight-item"><span class="material-icons insight-icon">check_circle</span><b>SEO:</b> Revisar keywords donde el rank org√°nico cay√≥ debajo de pos 10.</li>
        `;
    }

    // --- INTERACTIVE LOGIC ---
    window.updateInteractive = function() {
        const week = document.getElementById('week_selector').value;
        const comp = document.getElementById('comp_selector').value;

        // Filter data
        const myData = marketData.find(d => d.week_date === week && d.is_yaba_asin === 'Y');
        const compData = marketData.find(d => d.week_date === week && d.competitor_brand === comp);

        if(!myData || !compData) return;

        // Update Metrics
        const priceDiff = myData.price - compData.price;
        const shareDiff = (myData.click_share - compData.click_share) * 100;
        const rankDiff = myData.average_organic_rank - compData.average_organic_rank;

        const priceEl = document.getElementById('diff_price');
        priceEl.innerHTML = (priceDiff > 0 ? '+' : '') + formatCurrency(priceDiff);
        priceEl.style.color = priceDiff > 0 ? '#EA4335' : '#34A853'; // Cheaper is green
        document.getElementById('diff_price_desc').innerText = priceDiff > 0 ? "M√°s caros que competidor" : "M√°s baratos que competidor";

        const shareEl = document.getElementById('diff_share');
        shareEl.innerHTML = (shareDiff > 0 ? '+' : '') + shareDiff.toFixed(1) + '%';
        shareEl.style.color = shareDiff > 0 ? '#34A853' : '#EA4335';

        const rankEl = document.getElementById('diff_rank');
        rankEl.innerText = (rankDiff > 0 ? '+' : '') + rankDiff;
        rankEl.style.color = rankDiff < 0 ? '#34A853' : '#EA4335'; // Lower rank number is better

        // Draw Table
        let data = new google.visualization.DataTable();
        data.addColumn('string', 'M√©trica');
        data.addColumn('string', ourBrand);
        data.addColumn('string', comp);
        
        data.addRows([
            ['Precio', formatCurrency(myData.price), formatCurrency(compData.price)],
            ['Click Share', formatPercent(myData.click_share), formatPercent(compData.click_share)],
            ['Rank Org√°nico', myData.average_organic_rank.toString(), compData.average_organic_rank.toString()],
            ['Deal Activo', myData.weekly_number_of_days_with_deal > 0 ? 'S√ç' : 'NO', compData.weekly_number_of_days_with_deal > 0 ? 'S√ç' : 'NO'],
            ['ASIN', myData.asin, compData.asin]
        ]);

        let table = new google.visualization.Table(document.getElementById('table_div'));
        table.draw(data, {showRowNumber: false, width: '100%', height: '100%'});
    }

    // --- TAB SWITCHING ---
    window.switchTab = function(tabId) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        
        document.getElementById(tabId).classList.add('active');
        event.target.classList.add('active');

        // Redraw charts if hidden containers caused issues
        if(tabId === 'static') {
            drawTrendChart();
            drawCompetitivenessChart();
        }
    }

</script>

</body>
</html>